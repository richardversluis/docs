import{_ as a,c as t,o as e,b as n,e as s}from"./app.64b20f26.js";var o="/assets/net6-released.9500a41c.png";const Is='{"title":"v5.13.2 Release Notes","description":"","frontmatter":{"title":"v5.13.2 Release Notes","slug":"v5-13"},"headers":[{"level":2,"title":"net6.0 TFM builds added to all packages","slug":"net6-0-tfm-builds-added-to-all-packages"},{"level":2,"title":".NET 6 new Hosting Model","slug":"net-6-new-hosting-model"},{"level":2,"title":"New Modular Startup","slug":"new-modular-startup"},{"level":3,"title":"ConfigureAppHost","slug":"configureapphost"},{"level":3,"title":"Customize AppHost at different Startup Lifecycles","slug":"customize-apphost-at-different-startup-lifecycles"},{"level":3,"title":"Removing Features","slug":"removing-features"},{"level":3,"title":"Preserve ModularStartup configuration","slug":"preserve-modularstartup-configuration"},{"level":3,"title":"Migrating to HostingStartup","slug":"migrating-to-hostingstartup"},{"level":3,"title":"Utilizing net5 mix templates","slug":"utilizing-net5-mix-templates"},{"level":2,"title":"All project templates upgraded to .NET 6","slug":"all-project-templates-upgraded-to-net-6"},{"level":2,"title":"Creating new .NET 5 projects","slug":"creating-new-net-5-projects"},{"level":3,"title":"servicestack.net/start?tag=net5","slug":"servicestack-net-start-tag-net5"},{"level":2,"title":"ServiceStackVS now supports Visual Studio 2022","slug":"servicestackvs-now-supports-visual-studio-2022"},{"level":2,"title":".NET 6 DateOnly and TimeOnly Types","slug":"net-6-dateonly-and-timeonly-types"},{"level":2,"title":"Validation now a pre-configured Feature","slug":"validation-now-a-pre-configured-feature"},{"level":2,"title":"Breaking Changes","slug":"breaking-changes"},{"level":2,"title":"Lets go .NET 6.0!","slug":"lets-go-net-6-0"},{"level":2,"title":"v4.5 .NET Framework Deprecation Notice","slug":"v4-5-net-framework-deprecation-notice"}],"relativePath":"releases/v5_13.md","lastUpdated":1645007721753}',c={},p=n("p",null,[n("a",{href:"https://devblogs.microsoft.com/dotnet/announcing-net-6/",target:"_blank",rel:"noopener noreferrer"},[n("img",{src:o,alt:""})])],-1),l=n("p",null,[s("We've cut this release cadence short to focus on putting out a quality release to take advantage of the "),n("a",{href:"https://devblogs.microsoft.com/dotnet/announcing-net-6/",target:"_blank",rel:"noopener noreferrer"},"newest and best .NET runtime yet!")],-1),u=n("p",null,"In a lot of ways .NET 6 marks the start of a new era for .NET with the first LTS release after the end of the .NET Framework and .NET Standard with only 1 actively developed runtime going forward.",-1),i=n("p",null,"In alignment with .NET's future we're looking to embracing new .NET runtime features and provide better integration with .NET 6's development model so ServiceStack can be regarded as another module in an ASP .NET Core App's pipeline, allowing knowledge to be more reusably shared and to that end will be continuing to work on deeper integrations in future releases.",-1),r=n("h2",{id:"net6-0-tfm-builds-added-to-all-packages",tabindex:"-1"},[s("net6.0 TFM builds added to all packages "),n("a",{class:"header-anchor",href:"#net6-0-tfm-builds-added-to-all-packages","aria-hidden":"true"},"#")],-1),k=n("p",null,[s("This release lays the foundation for the new style of Apps promoted by .NET 6.0 starting with new "),n("strong",null,"net6.0"),s(" TFM builds added to all active ServiceStack NuGet packages. Previously ServiceStack's ASP .NET Core functionality was delivered in "),n("strong",null,".NET Standard 2.0"),s(" .dll's whose builds have served running ServiceStack on all .NET Core runtimes dating back to "),n("strong",null,".NET Core 2.x"),s(".")],-1),d=n("p",null,[s("The new "),n("strong",null,"net6.0"),s(" target builds has allowed us to reference the latest versions of each ASP .NET Core dependency we use, including the recommendation of referencing the "),n("strong",null,"Microsoft.AspNetCore.App"),s(),n("code",null,"<FrameworkReference/>"),s(" bundled with each .NET installation, a good example of this is seen in "),n("a",{href:"https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/ServiceStack.csproj",target:"_blank",rel:"noopener noreferrer"},"ServiceStack.csproj"),s(":")],-1),g=n("div",{class:"language-xml"},[n("pre",null,[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("ItemGroup")]),s(),n("span",{class:"token attr-name"},"Condition"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s(),n("span",{class:"token punctuation"},"'"),s("$(TargetFramework)"),n("span",{class:"token punctuation"},"'"),s(" == "),n("span",{class:"token punctuation"},"'"),s("netstandard2.0"),n("span",{class:"token punctuation"},"'"),s(),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Memory"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("4.5.4"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.ComponentModel.Annotations"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("5.0.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.Extensions.Primitives"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.AspNetCore.Http"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.2"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.AspNetCore.Http.Abstractions"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.AspNetCore.Http.Extensions"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.AspNetCore.Hosting"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.7"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.AspNetCore.Hosting.Abstractions"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.Extensions.Logging.Abstractions"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.Extensions.DependencyInjection"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.Extensions.DependencyInjection.Abstractions"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.AspNetCore.Cryptography.KeyDerivation"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.Extensions.Configuration.Binder"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.4"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.Extensions.Configuration.UserSecrets"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("2.2.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Threading.Thread"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("4.3.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Reflection.Emit"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("4.7.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Linq.Queryable"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("4.3.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Drawing.Common"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("5.0.2"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("ItemGroup")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("ItemGroup")]),s(),n("span",{class:"token attr-name"},"Condition"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s(),n("span",{class:"token punctuation"},"'"),s("$(TargetFramework)"),n("span",{class:"token punctuation"},"'"),s(" == "),n("span",{class:"token punctuation"},"'"),s("net6.0"),n("span",{class:"token punctuation"},"'"),s(),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("FrameworkReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("Microsoft.AspNetCore.App"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Memory"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("4.5.4"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.ComponentModel.Annotations"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("5.0.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Threading.Thread"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("4.3.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Reflection.Emit"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("4.7.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Linq.Queryable"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("4.3.0"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("PackageReference")]),s(),n("span",{class:"token attr-name"},"Include"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("System.Drawing.Common"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"Version"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("5.0.2"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("ItemGroup")]),n("span",{class:"token punctuation"},">")]),s(`
`)])])],-1),m=n("h2",{id:"net-6-new-hosting-model",tabindex:"-1"},[s(".NET 6 new Hosting Model "),n("a",{class:"header-anchor",href:"#net-6-new-hosting-model","aria-hidden":"true"},"#")],-1),h=n("p",null,[s("One of the most user visible features in .NET 6 is its "),n("a",{href:"https://gist.github.com/davidfowl/0e0372c3c1d895c3ce195ba983b1e03d",target:"_blank",rel:"noopener noreferrer"},"new WebApplication Hosting Model"),s(" which unifies existing "),n("code",null,"Program.cs"),s(" and "),n("code",null,"Startup.cs"),s(" classes and takes advantage of C# 9's Top-level statements where a minimal .NET 6 Hello World Web Application can now be as small as:")],-1),f=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" builder "),n("span",{class:"token operator"},"="),s(" WebApplication"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"CreateBuilder"),n("span",{class:"token punctuation"},"("),s("args"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" app "),n("span",{class:"token operator"},"="),s(" builder"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"MapGet"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token string"},'"Hello World"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])],-1),y=n("p",null,[s("As with most new radical features the contrast can be initially jarring, with one of the initial criticisms being that it lacks the forced structure of the "),n("code",null,"Startup"),s(" and encourages App's to mix all features into a single class.")],-1),v=n("p",null,[s("Whilst we agree it's bad practice for large Apps to maintain all their configuration in a single file, we also believe .NET 6's new Hosting Model offers a simpler App configuration as now the "),n("code",null,"Program.cs"),s(" for most new "),n("strong",null,"net6.0"),s(" ServiceStack Project Templates looks like:")],-1),w=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" builder "),n("span",{class:"token operator"},"="),s(" WebApplication"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"CreateBuilder"),n("span",{class:"token punctuation"},"("),s("args"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" app "),n("span",{class:"token operator"},"="),s(" builder"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Configure the HTTP request pipeline."),s(`
`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("app"),n("span",{class:"token punctuation"},"."),s("Environment"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"IsDevelopment"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseExceptionHandler"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/Error"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts."),s(`
    app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseHsts"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseHttpsRedirection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])],-1),b=n("p",null,[s("That's because now all ServiceStack's features are loaded using .NET's "),n("code",null,"HostingStartup"),s(", including ServiceStack's "),n("code",null,"AppHost"),s(" itself that's now being configured in "),n("a",{href:"https://github.com/NetCoreTemplates/web/blob/master/MyApp/Configure.AppHost.cs",target:"_blank",rel:"noopener noreferrer"},"Configure.AppHost.cs"),s(", e.g:")],-1),_=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token punctuation"},"["),n("span",{class:"token attribute"},[n("span",{class:"token target keyword"},"assembly"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"HostingStartup"),n("span",{class:"token attribute-arguments"},[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token type-expression class-name"},[s("MyApp"),n("span",{class:"token punctuation"},"."),s("AppHost")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")])]),n("span",{class:"token punctuation"},"]"),s(`

`),n("span",{class:"token keyword"},"namespace"),s(),n("span",{class:"token namespace"},"MyApp"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"AppHost"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"AppHostBase"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"IHostingStartup")]),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IWebHostBuilder"),s(" builder"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(` builder
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ConfigureServices"),n("span",{class:"token punctuation"},"("),s("services "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"// Configure ASP .NET Core IOC Dependencies"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),s("app "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"// Configure ASP .NET Core App"),s(`
            `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("HasInit"),n("span",{class:"token punctuation"},")"),s(`
                app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseServiceStack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AppHost"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token function"},"AppHost"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"base"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"MyApp"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"typeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token type-expression class-name"},"MyServices"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("Assembly"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"override"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Container"),s(" container"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// Configure ServiceStack only IOC, Config & Plugins"),s(`
        `),n("span",{class:"token function"},"SetConfig"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"HostConfig"),s(),n("span",{class:"token punctuation"},"{"),s(`
            UseSameSiteCookies `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])])],-1),S=n("p",null,[s("Whilst ServiceStack's "),n("code",null,"AppHost"),s(" remains the same, we're now recommending that it's registered using .NET's familiar "),n("code",null,"HostingStartup"),s(" so that all configuration pertaining to different features are encapsulated together allowing them to be more easily updated or replaced, e.g. each feature could be temporarily disabled by commenting out its assembly HostingStartup's attribute, including ServiceStack itself:")],-1),A=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token comment"},"//[assembly: HostingStartup(typeof(MyApp.AppHost))]"),s(`
`)])])],-1),C=n("div",{class:"info custom-block"},[n("p",{class:"custom-block-title"},"INFO"),n("p",null,[s("Reason for only conditionally registering ServiceStack with "),n("code",null,"if (!HasInit)"),s(" is to allow other plugins (like Auth) the opportunity to precisely control where ServiceStack is registered within its preferred ASP .NET Core's pipeline")])],-1),T=n("h2",{id:"new-modular-startup",tabindex:"-1"},[s("New Modular Startup "),n("a",{class:"header-anchor",href:"#new-modular-startup","aria-hidden":"true"},"#")],-1),H=n("iframe",{class:"video-hd",src:"https://www.youtube.com/embed/WgsFl0AFUdo",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,-1),x=n("p",null,[s("Our "),n("a",{href:"/modular-startup"},"Modular Startup"),s(" approach has encouraged the modular configuration of ServiceStack ASP .NET Core Apps using feature encapsulated configuration blocks for a number of years. This has enabled ServiceStack Apps to be easily composed with just the features developers need, either at project creation with "),n("a",{href:"http://servicestack.net/start",target:"_blank",rel:"noopener noreferrer"},"servicestack.net/start"),s(" page or after a project's creation where features can easily be added and removed using the command-line "),n("a",{href:"/mix-tool"},"mix tool"),s(".")],-1),N=n("p",null,[s("We're now embracing .NET 6's idiom and have rewritten all our "),n("a",{href:"https://gist.github.com/gistlyn/9b32b03f207a191099137429051ebde8",target:"_blank",rel:"noopener noreferrer"},"mix gist config files"),s(" to adopt its "),n("code",null,"HostingStartup"),s(" which is better able to load modular Startup configuration without assembly scanning.")],-1),E=n("p",null,"This is a standard ASP .NET Core feature that we can use to configure Mongo DB in any ASP .NET Core App with:",-1),I=n("div",{class:"language-bash"},[n("pre",null,[n("code",null,`$ x mix mongodb
`)])],-1),P=n("p",null,[s("Which adds the "),n("code",null,"mongodb"),s(" gist file contents to your ASP .NET Core Host project:")],-1),M=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token keyword"},"using"),s(),n("span",{class:"token namespace"},[s("Microsoft"),n("span",{class:"token punctuation"},"."),s("AspNetCore"),n("span",{class:"token punctuation"},"."),s("Hosting")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"using"),s(),n("span",{class:"token namespace"},[s("Microsoft"),n("span",{class:"token punctuation"},"."),s("Extensions"),n("span",{class:"token punctuation"},"."),s("DependencyInjection")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"using"),s(),n("span",{class:"token namespace"},[s("MongoDB"),n("span",{class:"token punctuation"},"."),s("Driver")]),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"["),n("span",{class:"token attribute"},[n("span",{class:"token target keyword"},"assembly"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"HostingStartup"),n("span",{class:"token attribute-arguments"},[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token type-expression class-name"},[s("MyApp"),n("span",{class:"token punctuation"},"."),s("ConfigureMongoDb")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")])]),n("span",{class:"token punctuation"},"]"),s(`

`),n("span",{class:"token keyword"},"namespace"),s(),n("span",{class:"token namespace"},"MyApp"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"ConfigureMongoDb"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"IHostingStartup")]),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IWebHostBuilder"),s(" builder"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(` builder
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ConfigureServices"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("context"),n("span",{class:"token punctuation"},","),s(" services"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" mongoClient "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"MongoClient"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token class-name"},"IMongoDatabase"),s(" mongoDatabase "),n("span",{class:"token operator"},"="),s(" mongoClient"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"GetDatabase"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"MyApp"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                services`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"AddSingleton"),n("span",{class:"token punctuation"},"("),s("mongoDatabase"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`    
`),n("span",{class:"token punctuation"},"}"),s(`
`)])])],-1),R=n("p",null,[s("As it's not a ServiceStack feature it can be used to configure ASP .NET Core Apps with any feature, e.g. we could also easily configure "),n("a",{href:"https://martendb.io",target:"_blank",rel:"noopener noreferrer"},"Marten"),s(" in an ASP .NET Core App with:")],-1),F=n("div",{class:"language-bash"},[n("pre",null,[n("code",null,`$ x mix marten
`)])],-1),q=n("p",null,"The benefit of this approach is entire modules of features can be configured in a single command, e.g. An empty ServiceStack App can be configured with MongoDB, ServiceStack Auth and a MongoDB Auth Repository with a single command:",-1),U=n("div",{class:"language-bash"},[n("pre",null,[n("code",null,`$ x mix auth auth-mongodb mongodb
`)])],-1),V=n("p",null,"Likewise should you wish, you can replace MongoDB with a completely different PostgreSQL RDBMS implementation by running:",-1),D=n("div",{class:"language-bash"},[n("pre",null,[n("code",null,`$ x mix auth auth-db postgres
`)])],-1),O=n("h3",{id:"configureapphost",tabindex:"-1"},[s("ConfigureAppHost "),n("a",{class:"header-anchor",href:"#configureapphost","aria-hidden":"true"},"#")],-1),B=n("p",null,[s("Looking deeper, we can see where we're plugins are able to configure ServiceStack via the "),n("code",null,".ConfigureAppHost()"),s(" extension method:")],-1),j=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token punctuation"},"["),n("span",{class:"token attribute"},[n("span",{class:"token target keyword"},"assembly"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"HostingStartup"),n("span",{class:"token attribute-arguments"},[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token type-expression class-name"},[s("MyApp"),n("span",{class:"token punctuation"},"."),s("ConfigureAuth")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")])]),n("span",{class:"token punctuation"},"]"),s(`

`),n("span",{class:"token keyword"},"namespace"),s(),n("span",{class:"token namespace"},"MyApp"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Add any additional metadata properties you want to store in the Users Typed Session"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"CustomUserSession"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"AuthUserSession")]),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    
    `),n("span",{class:"token comment"},"// Custom Validator to add custom validators to built-in /register Service requiring DisplayName and ConfirmPassword"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"CustomRegistrationValidator"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"RegistrationValidator")]),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token function"},"CustomRegistrationValidator"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token function"},"RuleSet"),n("span",{class:"token punctuation"},"("),s("ApplyTo"),n("span",{class:"token punctuation"},"."),s("Post"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(`
            `),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token function"},"RuleFor"),n("span",{class:"token punctuation"},"("),s("x "),n("span",{class:"token operator"},"=>"),s(" x"),n("span",{class:"token punctuation"},"."),s("DisplayName"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"NotEmpty"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token function"},"RuleFor"),n("span",{class:"token punctuation"},"("),s("x "),n("span",{class:"token operator"},"=>"),s(" x"),n("span",{class:"token punctuation"},"."),s("ConfirmPassword"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"NotEmpty"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"ConfigureAuth"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"IHostingStartup")]),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IWebHostBuilder"),s(" builder"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(` builder
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ConfigureServices"),n("span",{class:"token punctuation"},"("),s("services "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token comment"},"//services.AddSingleton<ICacheClient>(new MemoryCacheClient()); //Store User Sessions in Memory Cache (default)"),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ConfigureAppHost"),n("span",{class:"token punctuation"},"("),s("appHost "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" appSettings "),n("span",{class:"token operator"},"="),s(" appHost"),n("span",{class:"token punctuation"},"."),s("AppSettings"),n("span",{class:"token punctuation"},";"),s(`
                appHost`),n("span",{class:"token punctuation"},"."),s("Plugins"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AuthFeature"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"CustomUserSession"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
                    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},[s("IAuthProvider"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]")]),s(),n("span",{class:"token punctuation"},"{"),s(`
                        `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"CredentialsAuthProvider"),n("span",{class:"token punctuation"},"("),s("appSettings"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s("     "),n("span",{class:"token comment"},"/* Sign In with Username / Password credentials */"),s(`
                        `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"FacebookAuthProvider"),n("span",{class:"token punctuation"},"("),s("appSettings"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s("        "),n("span",{class:"token comment"},"/* Create App https://developers.facebook.com/apps */"),s(`
                        `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"GoogleAuthProvider"),n("span",{class:"token punctuation"},"("),s("appSettings"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s("          "),n("span",{class:"token comment"},"/* Create App https://console.developers.google.com/apis/credentials */"),s(`
                        `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"MicrosoftGraphAuthProvider"),n("span",{class:"token punctuation"},"("),s("appSettings"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s("  "),n("span",{class:"token comment"},"/* Create App https://apps.dev.microsoft.com */"),s(`
                    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

                appHost`),n("span",{class:"token punctuation"},"."),s("Plugins"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"RegistrationFeature"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"//Enable /register Service"),s(`

                `),n("span",{class:"token comment"},"//override the default registration validation with your own custom implementation"),s(`
                appHost`),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"RegisterAs"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),s("CustomRegistrationValidator"),n("span",{class:"token punctuation"},","),s(" IValidator"),n("span",{class:"token punctuation"},"<"),s("Register"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])])],-1),L=n("p",null,[s("By default any AppHost configuration is called before "),n("code",null,"AppHost.Configure()"),s(" is run, the AppHost can be further customized after it's run:")],-1),W=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token punctuation"},"["),n("span",{class:"token attribute"},[n("span",{class:"token target keyword"},"assembly"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"HostingStartup"),n("span",{class:"token attribute-arguments"},[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token type-expression class-name"},[s("MyApp"),n("span",{class:"token punctuation"},"."),s("ConfigureAuthRepository")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")])]),n("span",{class:"token punctuation"},"]"),s(`

`),n("span",{class:"token keyword"},"namespace"),s(),n("span",{class:"token namespace"},"MyApp"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Custom User Table with extended Metadata properties"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"AppUser"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"UserAuth")]),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"string")]),s(" ProfileUrl "),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"get"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token keyword"},"set"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"string")]),s(" LastLoginIp "),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"get"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token keyword"},"set"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[s("DateTime"),n("span",{class:"token punctuation"},"?")]),s(" LastLoginDate "),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"get"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token keyword"},"set"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"AppUserAuthEvents"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"AuthEvents")]),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"override"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"OnAuthenticated"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IRequest"),s(" req"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"IAuthSession"),s(" session"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"IServiceBase"),s(" authService"),n("span",{class:"token punctuation"},","),s(` 
            `),n("span",{class:"token class-name"},"IAuthTokens"),s(" tokens"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},[s("Dictionary"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token keyword"},"string"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"string"),n("span",{class:"token punctuation"},">")]),s(" authInfo"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" authRepo "),n("span",{class:"token operator"},"="),s(" HostContext"),n("span",{class:"token punctuation"},"."),s("AppHost"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"GetAuthRepository"),n("span",{class:"token punctuation"},"("),s("req"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token keyword"},"using"),s(),n("span",{class:"token punctuation"},"("),s("authRepo "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token class-name"},"IDisposable"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" userAuth "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("AppUser"),n("span",{class:"token punctuation"},")"),s("authRepo"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"GetUserAuth"),n("span",{class:"token punctuation"},"("),s("session"),n("span",{class:"token punctuation"},"."),s("UserAuthId"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                userAuth`),n("span",{class:"token punctuation"},"."),s("ProfileUrl "),n("span",{class:"token operator"},"="),s(" session"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"GetProfileUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                userAuth`),n("span",{class:"token punctuation"},"."),s("LastLoginIp "),n("span",{class:"token operator"},"="),s(" req"),n("span",{class:"token punctuation"},"."),s("UserHostAddress"),n("span",{class:"token punctuation"},";"),s(`
                userAuth`),n("span",{class:"token punctuation"},"."),s("LastLoginDate "),n("span",{class:"token operator"},"="),s(" DateTime"),n("span",{class:"token punctuation"},"."),s("UtcNow"),n("span",{class:"token punctuation"},";"),s(`
                authRepo`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"SaveUserAuth"),n("span",{class:"token punctuation"},"("),s("userAuth"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"ConfigureAuthRepository"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"IHostingStartup")]),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IWebHostBuilder"),s(" builder"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(` builder
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ConfigureServices"),n("span",{class:"token punctuation"},"("),s("services "),n("span",{class:"token operator"},"=>"),s(" services"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"AddSingleton"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),s("IAuthRepository"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),s("c "),n("span",{class:"token operator"},"=>"),s(`
                `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},[s("OrmLiteAuthRepository"),n("span",{class:"token punctuation"},"<"),s("AppUser"),n("span",{class:"token punctuation"},","),s(" UserAuthDetails"),n("span",{class:"token punctuation"},">")]),n("span",{class:"token punctuation"},"("),s("c"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"Resolve"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),s("IDbConnectionFactory"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
                    UseDistinctRoleTables `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),s(`
                `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ConfigureAppHost"),n("span",{class:"token punctuation"},"("),s("appHost "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" authRepo "),n("span",{class:"token operator"},"="),s(" appHost"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"Resolve"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),s("IAuthRepository"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                authRepo`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"InitSchema"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token comment"},'// CreateUser(authRepo, "admin@email.com", "Admin User", "p@55wOrd", roles:new[]{ RoleNames.Admin });'),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token named-parameter punctuation"},"afterConfigure"),n("span",{class:"token punctuation"},":"),s(" appHost "),n("span",{class:"token operator"},"=>"),s(` 
                appHost`),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"AssertPlugin"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),s("AuthFeature"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("AuthEvents"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AppUserAuthEvents"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// Add initial Users to the configured Auth Repository"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"CreateUser"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IAuthRepository"),s(" authRepo"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"string")]),s(" email"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"string")]),s(" name"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"string")]),s(" password"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"string"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]")]),s(" roles"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("authRepo"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"GetUserAuthByUserName"),n("span",{class:"token punctuation"},"("),s("email"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" newAdmin "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AppUser"),s(),n("span",{class:"token punctuation"},"{"),s(" Email "),n("span",{class:"token operator"},"="),s(" email"),n("span",{class:"token punctuation"},","),s(" DisplayName "),n("span",{class:"token operator"},"="),s(" name "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" user "),n("span",{class:"token operator"},"="),s(" authRepo"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"CreateUserAuth"),n("span",{class:"token punctuation"},"("),s("newAdmin"),n("span",{class:"token punctuation"},","),s(" password"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                authRepo`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"AssignRoles"),n("span",{class:"token punctuation"},"("),s("user"),n("span",{class:"token punctuation"},","),s(" roles"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])])],-1),z=n("h3",{id:"customize-apphost-at-different-startup-lifecycles",tabindex:"-1"},[s("Customize AppHost at different Startup Lifecycles "),n("a",{class:"header-anchor",href:"#customize-apphost-at-different-startup-lifecycles","aria-hidden":"true"},"#")],-1),G=n("p",null,"To cater for all plugins, AppHost configurations can be registered at different stages within the AppHost's initialization:",-1),$=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IWebHostBuilder"),s(" builder"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(` builder
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ConfigureAppHost"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token named-parameter punctuation"},"beforeConfigure"),n("span",{class:"token punctuation"},":"),s("    appHost "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token comment"},"/* fired before AppHost.Configure() */"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token named-parameter punctuation"},"afterConfigure"),n("span",{class:"token punctuation"},":"),s("     appHost "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token comment"},"/* fired after AppHost.Configure() */"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token named-parameter punctuation"},"afterPluginsLoaded"),n("span",{class:"token punctuation"},":"),s(" appHost "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token comment"},"/* fired after plugins are loaded */"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token named-parameter punctuation"},"afterAppHostInit"),n("span",{class:"token punctuation"},":"),s("   appHost "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token comment"},"/* fired after AppHost has initialized */"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])],-1),Q=n("h3",{id:"removing-features",tabindex:"-1"},[s("Removing Features "),n("a",{class:"header-anchor",href:"#removing-features","aria-hidden":"true"},"#")],-1),J=n("p",null,"The benefits of adopting a modular approach to AppHost configuration is the same as general organizational code structure which results in better decoupling and cohesion where it's easier to determine all the dependencies of a feature, easier to update, less chance of unintended side-effects, easier to share standard configuration amongst multiple projects and easier to remove the feature entirely, either temporarily if needing to isolate & debug a runtime issue by:",-1),K=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token comment"},"// [assembly: HostingStartup(typeof(MyApp.ConfigureAuth))]"),s(`
`)])])],-1),X=n("p",null,[s("Or easier to permanently replace or remove features by either directly deleting the isolated "),n("code",null,"*.cs"),s(" source files or by undoing mixing in the feature using "),n("code",null,"mix -delete"),s(", e.g:")],-1),Y=n("div",{class:"language-bash"},[n("pre",null,[n("code",null,`$ x mix -delete auth auth-db postgres
`)])],-1),Z=n("p",null,"Which works similar to package managers where it removes all files contained within each mix gist.",-1),nn=n("div",{class:"info custom-block"},[n("p",{class:"custom-block-title"},"INFO"),n("p",null,[s("Please see the "),n("a",{href:"https://gist.github.com/gistlyn/9b32b03f207a191099137429051ebde8#file-mix_howto-md",target:"_blank",rel:"noopener noreferrer"},"Mix HowTo"),s(" to find out how you can contribute your own gist mix features")])],-1),sn=n("h3",{id:"preserve-modularstartup-configuration",tabindex:"-1"},[s("Preserve ModularStartup configuration "),n("a",{class:"header-anchor",href:"#preserve-modularstartup-configuration","aria-hidden":"true"},"#")],-1),an=n("p",null,[s("Whilst using "),n("code",null,"HostingStartup"),s(" is recommended going forward, your existing "),n("code",null,"ModularStartup"),s(" classes will work without change when upgrading your projects to .NET6.")],-1),tn=n("p",null,[s("If you want to take advantage of the new .NET6 top-level host builder to side-step the need for a "),n("code",null,"Startup"),s(" class, you can still reuse and preserve your modular startup by adding "),n("code",null,"Services.AddModularStartup<AppHost>()"),s(" method before calling "),n("code",null,"builder.Build();"),s(", e.g:")],-1),en=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" builder "),n("span",{class:"token operator"},"="),s(" WebApplication"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"CreateBuilder"),n("span",{class:"token punctuation"},"("),s("args"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
builder`),n("span",{class:"token punctuation"},"."),s("Services"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"AddModularStartup"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),s("AppHost"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),s("builder"),n("span",{class:"token punctuation"},"."),s("Configuration"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" app "),n("span",{class:"token operator"},"="),s(" builder"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseServiceStack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AppHost"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])],-1),on=n("p",null,[s("The "),n("code",null,"AppHost"),s(" registration has become slightly easier to enable ServiceStack in this release when using the "),n("code",null,"NetCoreAppSettings"),s(", as you no longer need to manually inject the "),n("code",null,"IConfiguration"),s(" class as it's now automatically populated by default :")],-1),cn=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token comment"},"// Previously"),s(`
app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseServiceStack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AppHost"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    AppSettings `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"NetCoreAppSettings"),n("span",{class:"token punctuation"},"("),s("builder"),n("span",{class:"token punctuation"},"."),s("Configuration"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// New"),s(`
app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseServiceStack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AppHost"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])],-1),pn=n("h3",{id:"migrating-to-hostingstartup",tabindex:"-1"},[s("Migrating to HostingStartup "),n("a",{class:"header-anchor",href:"#migrating-to-hostingstartup","aria-hidden":"true"},"#")],-1),ln=n("p",null,[s("As we'll be using the new "),n("code",null,"HostingStartup"),s(" model going forward we recommend migrating your existing configuration to use them.")],-1),un=n("p",null,[s("To help with this you can refer to the "),n("a",{href:"https://github.com/ServiceStack/mix/commit/b56746622aa1879e3e6a8cbf835e634f05db30db",target:"_blank",rel:"noopener noreferrer"},"mix diff"),s(" showing how each of the existing mix configurations were converted to the new model.")],-1),rn=n("p",null,[s("As a concrete example, lets take a look at the steps used to migrate our Chinook example application "),n("a",{href:"https://github.com/NetCoreApps/Chinook/commit/2758af9deae9c3aa910a27134f95167f7ec6e541",target:"_blank",rel:"noopener noreferrer"},[s("from NET5 using the previous "),n("code",null,"Startup : ModularStartup"),s(", to the new "),n("code",null,"HostingStartup")]),s(".")],-1),kn=n("h4",{id:"step-1",tabindex:"-1"},[s("Step 1 "),n("a",{class:"header-anchor",href:"#step-1","aria-hidden":"true"},"#")],-1),dn=n("p",null,[s("Migrate your existing "),n("code",null,"ConfigureServices"),s(" and "),n("code",null,"Configure(IApplicationBuilder)"),s(" from "),n("code",null,"Startup : ModularStartup"),s(" to the top-level host builder in "),n("code",null,"Program.cs"),s(". Eg")],-1),gn=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" builder "),n("span",{class:"token operator"},"="),s(" WebApplication"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"CreateBuilder"),n("span",{class:"token punctuation"},"("),s("args"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" app "),n("span",{class:"token operator"},"="),s(" builder"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Configure the HTTP request pipeline."),s(`
`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("app"),n("span",{class:"token punctuation"},"."),s("Environment"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"IsDevelopment"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseExceptionHandler"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/Error"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// The default HSTS value is 30 days. "),s(`
    `),n("span",{class:"token comment"},"// You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts."),s(`
    app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseHsts"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseHttpsRedirection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])],-1),mn=n("h4",{id:"step-2",tabindex:"-1"},[s("Step 2 "),n("a",{class:"header-anchor",href:"#step-2","aria-hidden":"true"},"#")],-1),hn=n("p",null,[s("Move your "),n("code",null,"AppHost"),s(" class to a new "),n("code",null,"Configure.AppHost.cs"),s(" file.")],-1),fn=n("h4",{id:"step-3",tabindex:"-1"},[s("Step 3 "),n("a",{class:"header-anchor",href:"#step-3","aria-hidden":"true"},"#")],-1),yn=n("p",null,[s("Implement "),n("code",null,"IHostingStartup"),s(" on your AppHost with automatic initialization. Eg:")],-1),vn=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IWebHostBuilder"),s(" builder"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    builder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ConfigureServices"),n("span",{class:"token punctuation"},"("),s("services "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"// Configure ASP.NET Core IOC Dependencies"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),s("app "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"// Configure ASP.NET Core App"),s(`
            `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("HasInit"),n("span",{class:"token punctuation"},")"),s(`
                app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UseServiceStack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AppHost"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])])],-1),wn=n("h4",{id:"step-4",tabindex:"-1"},[s("Step 4 "),n("a",{class:"header-anchor",href:"#step-4","aria-hidden":"true"},"#")],-1),bn=n("p",null,[s("Declare "),n("code",null,"assembly: HostingStartup"),s(" for your "),n("code",null,"AppHost"),s(" in the same "),n("code",null,"Configure.AppHost.cs"),s(". Eg:")],-1),_n=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token punctuation"},"["),n("span",{class:"token attribute"},[n("span",{class:"token target keyword"},"assembly"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"HostingStartup"),n("span",{class:"token attribute-arguments"},[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token type-expression class-name"},[s("Chinook"),n("span",{class:"token punctuation"},"."),s("AppHost")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")])]),n("span",{class:"token punctuation"},"]"),s(`
`)])])],-1),Sn=n("h4",{id:"step-5",tabindex:"-1"},[s("Step 5 "),n("a",{class:"header-anchor",href:"#step-5","aria-hidden":"true"},"#")],-1),An=n("p",null,[s("Migrate each existing modular startup class that implements "),n("code",null,"IConfgiureServices"),s(" and/or "),n("code",null,"IConfigureApp"),s(" to use "),n("code",null,"IHostingStartup"),s(". Eg:")],-1),Cn=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token comment"},"// net5.0 modular startup"),s(`
`),n("span",{class:"token keyword"},"using"),s(),n("span",{class:"token namespace"},"ServiceStack"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"namespace"),s(),n("span",{class:"token namespace"},"Chinook"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"ConfigureAutoQuery"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"IConfigureAppHost")]),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IAppHost"),s(" appHost"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
            appHost`),n("span",{class:"token punctuation"},"."),s("Plugins"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AutoQueryFeature"),s(),n("span",{class:"token punctuation"},"{"),s(`
                MaxLimit `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1000"),n("span",{class:"token punctuation"},","),s(`
                IncludeTotal `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])])],-1),Tn=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token comment"},"// net6.0 modular startup using IHostingStartup"),s(`
`),n("span",{class:"token keyword"},"using"),s(),n("span",{class:"token namespace"},[s("Microsoft"),n("span",{class:"token punctuation"},"."),s("AspNetCore"),n("span",{class:"token punctuation"},"."),s("Hosting")]),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"using"),s(),n("span",{class:"token namespace"},"ServiceStack"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"["),n("span",{class:"token attribute"},[n("span",{class:"token target keyword"},"assembly"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"HostingStartup"),n("span",{class:"token attribute-arguments"},[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token type-expression class-name"},[s("Chinook"),n("span",{class:"token punctuation"},"."),s("ConfigureAutoQuery")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")])]),n("span",{class:"token punctuation"},"]"),s(`

`),n("span",{class:"token keyword"},"namespace"),s(),n("span",{class:"token namespace"},"Chinook"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"ConfigureAutoQuery"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token type-list"},[n("span",{class:"token class-name"},"IHostingStartup")]),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token return-type class-name"},[n("span",{class:"token keyword"},"void")]),s(),n("span",{class:"token function"},"Configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"IWebHostBuilder"),s(" builder"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
            builder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ConfigureAppHost"),n("span",{class:"token punctuation"},"("),s("appHost "),n("span",{class:"token operator"},"=>"),s(`
            `),n("span",{class:"token punctuation"},"{"),s(`
                appHost`),n("span",{class:"token punctuation"},"."),s("Plugins"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"AutoQueryFeature"),s(),n("span",{class:"token punctuation"},"{"),s(`
                    MaxLimit `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1000"),n("span",{class:"token punctuation"},","),s(`
                    IncludeTotal `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),s(`
                `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])])],-1),Hn=n("blockquote",null,[n("p",null,[s("Remembering also that infrastructure like your "),n("code",null,"Dockerfile"),s(" or host will likely need the runtimes/SDKs updated as well.")])],-1),xn=n("h3",{id:"utilizing-net5-mix-templates",tabindex:"-1"},[s("Utilizing net5 mix templates "),n("a",{class:"header-anchor",href:"#utilizing-net5-mix-templates","aria-hidden":"true"},"#")],-1),Nn=n("p",null,[s("To support older projects the "),n("a",{href:"https://gist.github.com/gistlyn/7362ea802aef361bbdc21097b6a99e0d",target:"_blank",rel:"noopener noreferrer"},"Existing ModularStartup configuration"),s(" can still be used for when running on earlier .NET Core runtimes with the mix tool by setting its gist Id in the "),n("code",null,"MIX_SOURCE"),s(" Environment Variable, e.g:")],-1),En=n("div",{class:"language-bash"},[n("pre",null,[n("code",null,[s("$ "),n("span",{class:"token assign-left variable"},"MIX_SOURCE"),n("span",{class:"token operator"},"="),s(`7362ea802aef361bbdc21097b6a99e0d x mix
`)])])],-1),In=n("p",null,"Which will use the older mix configuration as its source.",-1),Pn=n("h2",{id:"all-project-templates-upgraded-to-net-6",tabindex:"-1"},[s("All project templates upgraded to .NET 6 "),n("a",{class:"header-anchor",href:"#all-project-templates-upgraded-to-net-6","aria-hidden":"true"},"#")],-1),Mn=n("p",null,"As an LTS release we expect everyone will want to upgrade to .NET 6 as soon as possible to take advantage of .NET's best & fastest runtime yet. We're already using .NET 6 in production and haven't come across any reason not to upgrade yet.",-1),Rn=n("p",null,[s("With the project templates upgraded, you can now create a new ServiceStack .NET 6 App with "),n("a",{href:"/dotnet-new"},"x new"),s(":")],-1),Fn=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[s("$ x "),n("span",{class:"token keyword"},"new"),s(`
`)])])],-1),qn=n("p",null,"Or from our online project template creator at:",-1),Un=n("h1",{id:"servicestack-net-start",tabindex:"-1"},[n("a",{href:"http://servicestack.net/start",target:"_blank",rel:"noopener noreferrer"},"servicestack.net/start"),s(),n("a",{class:"header-anchor",href:"#servicestack-net-start","aria-hidden":"true"},"#")],-1),Vn=n("h2",{id:"creating-new-net-5-projects",tabindex:"-1"},[s("Creating new .NET 5 projects "),n("a",{class:"header-anchor",href:"#creating-new-net-5-projects","aria-hidden":"true"},"#")],-1),Dn=n("p",null,[s("If you're not yet ready to move to .NET 6 you can still create new project templates of older versions of "),n("a",{href:"https://github.com/NetCoreTemplates/",target:"_blank",rel:"noopener noreferrer"},".NET Core project templates"),s(".")],-1),On=n("p",null,"Where we've added .NET 5 project template support to our online Project creator page at:",-1),Bn=n("h3",{id:"servicestack-net-start-tag-net5",tabindex:"-1"},[n("a",{href:"http://servicestack.net/start?tag=net5",target:"_blank",rel:"noopener noreferrer"},"servicestack.net/start?tag=net5"),s(),n("a",{class:"header-anchor",href:"#servicestack-net-start-tag-net5","aria-hidden":"true"},"#")],-1),jn=n("p",null,[s("Otherwise our .NET Core project templates have had their last .NET 5.0 version tagged with "),n("code",null,"net5"),s(" which can be installed with the "),n("code",null,"x"),s(" tool by using the full URL of its Source Code "),n("strong",null,".zip"),s(" archive in place of the Template name, e.g:")],-1),Ln=n("div",{class:"language-bash"},[n("pre",null,[n("code",null,[s("$ x new https://github.com/NetCoreTemplates/"),n("span",{class:"token operator"},"<"),s("template"),n("span",{class:"token operator"},">"),s(`/archive/refs/tags/net5.zip ProjectName
`)])])],-1),Wn=n("h2",{id:"servicestackvs-now-supports-visual-studio-2022",tabindex:"-1"},[s("ServiceStackVS now supports Visual Studio 2022 "),n("a",{class:"header-anchor",href:"#servicestackvs-now-supports-visual-studio-2022","aria-hidden":"true"},"#")],-1),zn=n("p",null,[n("a",{href:"https://docs.servicestack.net/templates-install-servicestackvs",target:"_blank",rel:"noopener noreferrer"},[n("img",{src:"https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/ssvs/vs-extensions-ssvs.png",alt:""})])],-1),Gn=n("p",null,"Developers that have upgraded to Visual Studio 2022 can now use the Add ServiceStack Reference tooling for C#, TypeScript, F# and VB-NET!",-1),$n=n("p",null,[s("The latest update supports both Visual Studio 2019 and 2022. If you are using an older version of Visual Studio, the "),n("a",{href:"https://docs.servicestack.net/templates-install-servicestackvs#visual-studio-2013-2017",target:"_blank",rel:"noopener noreferrer"},"previous version can still be downloaded here"),s(".")],-1),Qn=n("div",{class:"info custom-block"},[n("p",{class:"custom-block-title"},"INFO"),n("p",null,[s("Project templates are no longer a part of the Visual Studio Extension, instead developers can use "),n("a",{href:"https://docs.servicestack.net/templates-overview",target:"_blank",rel:"noopener noreferrer"},[n("code",null,"x new")]),s(" or "),n("a",{href:"https://servicestack.net/start",target:"_blank",rel:"noopener noreferrer"},"Getting Started"),s(" page on the ServiceStack website.")])],-1),Jn=n("h2",{id:"net-6-dateonly-and-timeonly-types",tabindex:"-1"},[s(".NET 6 "),n("code",null,"DateOnly"),s(" and "),n("code",null,"TimeOnly"),s(" Types "),n("a",{class:"header-anchor",href:"#net-6-dateonly-and-timeonly-types","aria-hidden":"true"},"#")],-1),Kn=n("p",null,[s("To be able to more intently capture whole Dates and Times, .NET 6 sees the introduction of new "),n("a",{href:"https://devblogs.microsoft.com/dotnet/date-time-and-time-zone-enhancements-in-net-6/",target:"_blank",rel:"noopener noreferrer"},"DateOnly and TimeOnly Value Types"),s(" which we expect to be a welcomed addition to Data Models so we've added built-in support for them in our "),n("a",{href:"https://github.com/ServiceStack/ServiceStack.Text",target:"_blank",rel:"noopener noreferrer"},"JSON, JSV and CSV Text Serializers"),s(" as well as for persistance in "),n("a",{href:"https://github.com/ServiceStack/ServiceStack.OrmLite",target:"_blank",rel:"noopener noreferrer"},"OrmLite"),s(" Data Models.")],-1),Xn=n("h2",{id:"validation-now-a-pre-configured-feature",tabindex:"-1"},[s("Validation now a pre-configured Feature "),n("a",{class:"header-anchor",href:"#validation-now-a-pre-configured-feature","aria-hidden":"true"},"#")],-1),Yn=n("p",null,[s("Like ASP .NET Core itself, ServiceStack is primarily a modular Pay-to-Play framework with its functionality included as removable plugins where we "),n("a",{href:"/plugins#auto-registered-plugins"},"limit built-ins to the bare essentials"),s(" so unused features have no effect at runtime as well as to not prohibitively discourage better implementations from competing with defaults.")],-1),Zn=n("p",null,[n("a",{href:"/validation#validation-feature"},"Validation"),s(" has become one of those features which many people have come to rely on, where a popular reported issue is that is expected to work out-of-the-box. As it's based on an opinionated "),n("a",{href:"https://fluentvalidation.net",target:"_blank",rel:"noopener noreferrer"},"FluentValidation"),s(" library we were hesitant to register it by default to leave room should a better and more ergonomic implementation for .NET was created, but as that hasn't happened we've built-in and extended validation support to add support for "),n("a",{href:"/declarative-validation#type-validators"},"Type Validators"),s(", "),n("a",{href:"/declarative-validation#type-validators"},"Declarative Validation Attributes"),s(" and dynamic data sources like "),n("a",{href:"/declarative-validation#db-validation-rules"},"DB Validation Rules"),s(".")],-1),ns=n("p",null,"As it's a popular feature used in APIs we've upgraded it to a pre-registered plugin so it no longer needs to be explicitly registered:",-1),ss=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token comment"},"// Plugins.Add(new ValidationFeature());"),s(`
`)])])],-1),as=n("p",null,"For Backwards compatibility we'll emit a warning if it's explicitly registered, and remove the pre-registered plugin.",-1),ts=n("p",null,[s("Like other "),n("a",{href:"/plugins#plugin-api"},"Auto-registered Plugins"),s(" it can be resolved from the "),n("code",null,"Plugins"),s(" collection or AppHost:")],-1),es=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" feature "),n("span",{class:"token operator"},"="),s(" Plugins"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"FirstOrDefault"),n("span",{class:"token punctuation"},"("),s("x "),n("span",{class:"token operator"},"=>"),s(" x "),n("span",{class:"token keyword"},"is"),s(),n("span",{class:"token class-name"},"ValidationFeature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(` 
`),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" feature "),n("span",{class:"token operator"},"="),s(" appHost"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"AssertPlugin"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),s("ValidationFeature"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// throw if not registered"),s(`
`)])])],-1),os=n("p",null,[s("And likewise can be removed from the "),n("code",null,"Plugins"),s(" collection or Feature Flags:")],-1),cs=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[s("Plugins"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"RemoveAll"),n("span",{class:"token punctuation"},"("),s("x "),n("span",{class:"token operator"},"=>"),s(" x "),n("span",{class:"token keyword"},"is"),s(),n("span",{class:"token class-name"},"ValidationFeature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(` 

`),n("span",{class:"token function"},"SetConfig"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"HostConfig"),s(),n("span",{class:"token punctuation"},"{"),s(`
    EnableFeatures `),n("span",{class:"token operator"},"="),s(" Feature"),n("span",{class:"token punctuation"},"."),s("All"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Remove"),n("span",{class:"token punctuation"},"("),s("Feature"),n("span",{class:"token punctuation"},"."),s("Validation"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])],-1),ps=n("h2",{id:"breaking-changes",tabindex:"-1"},[s("Breaking Changes "),n("a",{class:"header-anchor",href:"#breaking-changes","aria-hidden":"true"},"#")],-1),ls=n("p",null,[s("One breaking change that was unavoidable after adding .NET 6 TFM builds was needing to rename "),n("a",{href:"/ormlite/ormlite-apis#updateonly"},"UpdateOnly OrmLite APIs"),s(" to resolve new C# compiler ambiguous method overload errors.")],-1),us=n("p",null,[s("Previously "),n("code",null,"UpdateOnly()"),s(" APIs accepted either a lambda expression where the fields to update would be inferred by the constructor Expression or it could accept a Data Model Instance which requires explicitly specifying which Properties of the Data Model should be updated, e.g. both of these are API Examples have the same behavior:")],-1),is=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[s("db"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UpdateOnly"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"Person"),s(),n("span",{class:"token punctuation"},"{"),s(" FirstName "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"Ty"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
db`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UpdateOnly"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"Person"),s(),n("span",{class:"token punctuation"},"{"),s(" FirstName "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"Ty"'),n("span",{class:"token punctuation"},","),s(" Age "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"27"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" person "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"Person"),s(),n("span",{class:"token punctuation"},"{"),s(" FirstName "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"Ty"'),n("span",{class:"token punctuation"},","),s(" Age "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"27"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
db`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UpdateOnly"),n("span",{class:"token punctuation"},"("),s("person"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token named-parameter punctuation"},"onlyFields"),n("span",{class:"token punctuation"},":"),s(" p "),n("span",{class:"token operator"},"=>"),s(" p"),n("span",{class:"token punctuation"},"."),s("FirstName"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
db`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UpdateOnly"),n("span",{class:"token punctuation"},"("),s("person"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token named-parameter punctuation"},"onlyFields"),n("span",{class:"token punctuation"},":"),s(" p "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token punctuation"},"{"),s(" p"),n("span",{class:"token punctuation"},"."),s("FirstName"),n("span",{class:"token punctuation"},","),s(" p"),n("span",{class:"token punctuation"},"."),s("Age "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])],-1),rs=n("p",null,[s("This now results in a build error so we've renamed the instance UpdateOnly APIs to "),n("code",null,"UpdateOnlyFields"),s(", e.g:")],-1),ks=n("div",{class:"language-csharp"},[n("pre",null,[n("code",null,[s("db"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UpdateOnlyFields"),n("span",{class:"token punctuation"},"("),s("person"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token named-parameter punctuation"},"onlyFields"),n("span",{class:"token punctuation"},":"),s(" p "),n("span",{class:"token operator"},"=>"),s(" p"),n("span",{class:"token punctuation"},"."),s("FirstName"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
db`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"UpdateOnlyFields"),n("span",{class:"token punctuation"},"("),s("person"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token named-parameter punctuation"},"onlyFields"),n("span",{class:"token punctuation"},":"),s(" p "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token punctuation"},"{"),s(" p"),n("span",{class:"token punctuation"},"."),s("FirstName"),n("span",{class:"token punctuation"},","),s(" p"),n("span",{class:"token punctuation"},"."),s("Age "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])],-1),ds=n("p",null,[s("Basically if you encounter a build error after upgrading you'll need to add a "),n("code",null,"*Fields"),s(" suffix to the "),n("code",null,"UpdateOnly"),s(" method name.")],-1),gs=n("h2",{id:"lets-go-net-6-0",tabindex:"-1"},[s("Lets go .NET 6.0! "),n("a",{class:"header-anchor",href:"#lets-go-net-6-0","aria-hidden":"true"},"#")],-1),ms=n("p",null,"Despite only being a minor feature release, it in some ways marks a turning point for ServiceStack where we can look beyond the Legacy .NET Framework and .NET Standard past and focus new features that enable deeper integrations on the single unified .NET Runtime of .NET's future, we're excited to have ServiceStack join the .NET 6 party and look forward to resume working on our next feature release.",-1),hs=n("p",null,[s("If you run into any issues please let us know in the "),n("a",{href:"https://forums.servicestack.net",target:"_blank",rel:"noopener noreferrer"},"Customer Forums"),s(" or "),n("a",{href:"https://github.com/ServiceStack/Issues",target:"_blank",rel:"noopener noreferrer"},"Issue Tracker"),s(".")],-1),fs=n("h2",{id:"v4-5-net-framework-deprecation-notice",tabindex:"-1"},[s("v4.5 .NET Framework Deprecation Notice "),n("a",{class:"header-anchor",href:"#v4-5-net-framework-deprecation-notice","aria-hidden":"true"},"#")],-1),ys=n("p",null,[s("In an effort to streamline the supported runtimes ServiceStack runs on we intend on following "),n("a",{href:"https://docs.microsoft.com/en-us/lifecycle/products/microsoft-net-framework",target:"_blank",rel:"noopener noreferrer"},"Microsoft .NET Framework end of support dates"),s(" and drop support for .NET v4.5 in after its support end date at "),n("strong",null,"April 26, 2022"),s(".")],-1),vs=n("p",null,[s("We're already forced to maintain multiple minimum .NET Framework version requirements in a number of packages with 3rd Party dependencies lacking .NET 4.5 TFM builds so our packages currently have a mix of different minimum version requirements. To consolidate all .NET Framework builds to use a single version we intend on upgrading the "),n("strong",null,"minimum version"),s(" to "),n("strong",null,".NET Framework v4.7.2"),s(" after "),n("strong",null,"April 26, 2022"),s(".")],-1),ws=n("p",null,[s("If you're currently running ServiceStack on .NET "),n("strong",null,"v4.5 or v4.6"),s(" and intend to continue updating to newer versions we encourage you to start planning your upgrade to a newer .NET Framework "),n("strong",null,"on or after v4.7.2"),s(".")],-1),bs=n("p",null,[s("If you're unable to upgrade for any reason please let us know in the "),n("a",{href:"https://forums.servicestack.net",target:"_blank",rel:"noopener noreferrer"},"Customer Forums"),s(" so we can measure the number of Customers affected for consideration in lowering our minimum .NET Framework requirements.")],-1),_s=[p,l,u,i,r,k,d,g,m,h,f,y,v,w,b,_,S,A,C,T,H,x,N,E,I,P,M,R,F,q,U,V,D,O,B,j,L,W,z,G,$,Q,J,K,X,Y,Z,nn,sn,an,tn,en,on,cn,pn,ln,un,rn,kn,dn,gn,mn,hn,fn,yn,vn,wn,bn,_n,Sn,An,Cn,Tn,Hn,xn,Nn,En,In,Pn,Mn,Rn,Fn,qn,Un,Vn,Dn,On,Bn,jn,Ln,Wn,zn,Gn,$n,Qn,Jn,Kn,Xn,Yn,Zn,ns,ss,as,ts,es,os,cs,ps,ls,us,is,rs,ks,ds,gs,ms,hs,fs,ys,vs,ws,bs];function Ss(As,Cs,Ts,Hs,xs,Ns){return e(),t("div",null,_s)}var Ps=a(c,[["render",Ss]]);export{Is as __pageData,Ps as default};
