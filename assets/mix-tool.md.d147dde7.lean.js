import{_ as e,c as t,o,b as n,e as s,a}from"./app.64b20f26.js";const Hn='{"title":"Mix features into ASP.NET Core Projects from Gists","description":"","frontmatter":{"slug":"mix-tool","title":"Mix features into ASP.NET Core Projects from Gists"},"headers":[{"level":3,"title":"mix-enabled dotnet tools","slug":"mix-enabled-dotnet-tools"},{"level":3,"title":"mix Usage","slug":"mix-usage"},{"level":3,"title":"Mix in Features into ASP.NET Core Apps","slug":"mix-in-features-into-asp-net-core-apps"},{"level":3,"title":"Mix in DB Support","slug":"mix-in-db-support"},{"level":3,"title":"Composable Features","slug":"composable-features"},{"level":3,"title":"Undo mix","slug":"undo-mix"},{"level":3,"title":"Encapsulated Features","slug":"encapsulated-features"},{"level":3,"title":"Mix in Auth Repository","slug":"mix-in-auth-repository"},{"level":3,"title":"Mix in MQ Server","slug":"mix-in-mq-server"},{"level":2,"title":"Mix in NUglify","slug":"mix-in-nuglify"},{"level":3,"title":"Mix in Prebuilt Recipes and Working Examples","slug":"mix-in-prebuilt-recipes-and-working-examples"},{"level":3,"title":"example-validation","slug":"example-validation"},{"level":3,"title":"feature-mq","slug":"feature-mq"},{"level":3,"title":"feature-authrepo","slug":"feature-authrepo"}],"relativePath":"mix-tool.md","lastUpdated":1645007721713}',p={},c=n("p",null,[s("To complete the picture of making it easy as possible to compose "),n("a",{href:"http://ASP.NET",target:"_blank",rel:"noopener noreferrer"},"ASP.NET"),s(" Core Apps & easily install features we've added "),n("code",null,"mix"),s(" support to the "),n("a",{href:"/dotnet-tool"},"dotnet tools"),s(":")],-1),i=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"dotnet tool install --global x")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),l=n("p",null,[s("The same functionality is also built into the Windows "),n("a",{href:"/netcore-windows-desktop"},"app"),s(" dotnet tool, both can be updated to the latest version with:")],-1),r=n("p",null,".NET 6.0 (Windows/macOS/Linux):",-1),u=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"dotnet tool update -g x")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),d=n("p",null,".NET 6.0 (Windows x64):",-1),k=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"dotnet tool update -g app")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),h=a(`__VP_STATIC_START__<h3 id="mix-enabled-dotnet-tools" tabindex="-1">mix-enabled dotnet tools <a class="header-anchor" href="#mix-enabled-dotnet-tools" aria-hidden="true">#</a></h3><p><code>mix</code> works exactly the same in all dotnet tools, which just needs the <strong>tool name prefixed</strong> before the <code>mix</code> command:</p><div class="language-bash"><pre><code>$ x mix <span class="token punctuation">..</span>.
$ app mix <span class="token punctuation">..</span>.
</code></pre></div><h3 id="mix-usage" tabindex="-1">mix Usage <a class="header-anchor" href="#mix-usage" aria-hidden="true">#</a></h3><p><code>x mix</code> is designed around applying <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core features captured in GitHub gists to your local .NET Core projects.</p><p>Type <code>x mix ?</code> for a quick Usage Summary:</p><div class="language-"><pre><code>View all published gists:
   x mix

Simple Usage:
   x mix &lt;name&gt; &lt;name&gt; ...

Mix using numbered list index instead:
   x mix 1 3 5 ...

Delete previously mixed gists:
   x mix -delete &lt;name&gt; &lt;name&gt; ...

Use custom project name instead of current folder name (replaces MyApp):
   x mix -name ProjectName &lt;name&gt; &lt;name&gt; ...

Replace additional tokens before mixing:
   x mix -replace term=with &lt;name&gt; &lt;name&gt; ...

Multi replace with escaped string example:
   x mix -replace term=with -replace &quot;This Phrase&quot;=&quot;With This&quot; &lt;name&gt; &lt;name&gt; ...

Only display available gists with a specific tag:
  x mix [tag]
  x mix [tag1,tag2]
</code></pre></div><p>Although most of the time you&#39;re only going to run 2 commands, viewing available features with:</p>__VP_STATIC_END__`,8),g=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),m=n("p",null,"Where it displays different features that can be added to your App, where they're added to and the author of the Gist:",-1),w=n("div",{class:"language-"},[n("pre",null,[n("code",null,` 1. init                 Empty C# .NET 6.0 ServiceStack App      to: .      by @ServiceStack  [project,C#]
 2. init-lts             Empty C# .NET 6.0 LTS ServiceStack App  to: .      by @ServiceStack  [project,VB]
 3. init-vb              Empty VB .NET 6.0 LTS ServiceStack App  to: .      by @ServiceStack  [project,F#]
 4. init-fsharp          Empty F# .NET 6.0 LTS ServiceStack App  to: .      by @ServiceStack  [project,C#]
 5. init-corefx          Empty ASP.NET 2.1 LTS on .NET Framework to: .      by @ServiceStack  [project,C#]
 6. init-sharp-app       Empty ServiceStack #Script App               to: .      by @ServiceStack  [project,S#]
 7. bootstrap-sharp      Bootstrap + #Script Pages Starter Template   to: $HOST  by @ServiceStack  [ui,S#]
 8. redis                Use ServiceStack.Redis                       to: $HOST  by @ServiceStack  [db]
 9. sqlserver            Use OrmLite with SQL Server                  to: $HOST  by @ServiceStack  [db]
10. sqlite               Use OrmLite with SQLite                      to: $HOST  by @ServiceStack  [db]
11. postgres             Use OrmLite with PostgreSQL                  to: $HOST  by @ServiceStack  [db]
12. mysql                Use OrmLite with MySql                       to: $HOST  by @ServiceStack  [db]
13. oracle               Use OrmLite with Oracle                      to: $HOST  by @ServiceStack  [db]
14. firebird             Use OrmLite with Firebird                    to: $HOST  by @ServiceStack  [db]
15. dynamodb             Use AWS DynamoDB and PocoDynamo              to: $HOST  by @ServiceStack  [db]
16. mongodb              Use MongoDB                                  to: $HOST  by @ServiceStack  [db]
17. ravendb              Use RavenDB                                  to: $HOST  by @ServiceStack  [db]
18. marten               Use Marten NoSQL with PostgreSQL             to: $HOST  by @ServiceStack  [db]
19. auth                 Configure AuthFeature                        to: $HOST  by @ServiceStack  [auth]
20. auth-db              Use OrmLite Auth Repository (requires auth)  to: $HOST  by @ServiceStack  [auth]
21. auth-redis           Use Redis Auth Repository (requires auth)    to: $HOST  by @ServiceStack  [auth]
22. auth-memory          Use Memory Auth Repository (requires auth)   to: $HOST  by @ServiceStack  [auth]
23. auth-dynamodb        Use DynamoDB Auth Repository (requires auth) to: $HOST  by @ServiceStack  [auth]
24. auth-mongodb         Use MongoDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack  [auth]
25. auth-ravendb         Use RavenDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack  [auth]
26. auth-marten          Use Marten Auth Repository (requires auth)   to: $HOST  by @ServiceStack  [auth]
27. backgroundmq         Use Memory Background MQ                     to: $HOST  by @ServiceStack  [mq]
28. rabbitmq             Use RabbitMQ                                 to: $HOST  by @ServiceStack  [mq]
29. sqs                  Use AWS SQS MQ                               to: $HOST  by @ServiceStack  [mq]
30. servicebus           Use Azure Service Bus MQ                     to: $HOST  by @ServiceStack  [mq]
31. redismq              Use Redis MQ                                 to: $HOST  by @ServiceStack  [mq]
32. feature-mq           Simple MQ Feature to test sending Messages   to: $HOST  by @ServiceStack  [mq]
33. feature-authrepo     List & Search Users registered in Auth Repo  to: $HOST  by @ServiceStack  [auth]
34. hangfire-postgres    Postgres hangfire cron scheduler & dashboard to: $HOST  by @GuerrillaCoder [hangfire]
35. autocrudgen          Configure AutoGen AutoCrud Services          to: $HOST  by @ServiceStack  [autoquery]
36. autodto              Generate DB DTOs in C#, TypeScript, Dart...  to: .      by @ServiceStack  [autoquery]
37. sharpdata            Instant JSON,CSV,XML,JSV data APIs           to: .      by @ServiceStack  [db]
38. nuglify              Use Nuglify's Advanced JS/CSS/HTML Minifiers to: $HOST  by @ServiceStack  [assets]
39. northwind.sqlite     northwind.sqlite                             to: .      by @ServiceStack  [sqlite]
40. northwind.sharpdata  northwind.sharpdata                          to: .      by @ServiceStack  [sharpdata]
41. vue-lite-lib         Update vue-lite projects libraries           to: $HOST  by @ServiceStack  [lib,vue]
42. react-lite-lib       Update react-lite projects libraries         to: $HOST  by @ServiceStack  [lib,react]
43. grpc                 Configure gRPC (requires .NET 6.0)      to: $HOST  by @ServiceStack  [grpc]
44. grpc-android         Android gRPC SSL Channel Builder             to: .      by @ServiceStack  [java,grpc]
45. bcl.proto            protobuf-net\\bcl.proto                       to: .      by @ServiceStack  [grpc]
46. example-validation   Contacts Validation Example                  to: $HOST  by @ServiceStack  [example]
47. validation-contacts  Contacts Validation Example                  to: $HOST  by @ServiceStack  [example]
48. feature-mq           Simple MQ Feature to test sending Messages   to: $HOST  by @ServiceStack  [feature,mq]
49. feature-authrepo     List and Search Users registered in AuthRepo to: $HOST  by @ServiceStack  [feature]
50. docker               Dockerfile example for .NET Core Sharp Apps  to: .      by @ServiceStack  [config]
51. svg-action           Material Design Action Icons                 to: svg/   by @ServiceStack  [svg]
52. svg-alert            Material Design Alert Icons                  to: svg/   by @ServiceStack  [svg]
53. svg-av               Material Design Audio Visual Icons           to: svg/   by @ServiceStack  [svg]
54. svg-communication    Material Design Communication Icons          to: svg/   by @ServiceStack  [svg]
55. svg-content          Material Design Content Icons                to: svg/   by @ServiceStack  [svg]
56. svg-device           Material Design Device Icons                 to: svg/   by @ServiceStack  [svg]
57. svg-editor           Material Design Editor Icons                 to: svg/   by @ServiceStack  [svg]
58. svg-file             Material Design File Icons                   to: svg/   by @ServiceStack  [svg]
59. svg-hardware         Material Design Hardware Icons               to: svg/   by @ServiceStack  [svg]
60. svg-image            Material Design Image Icons                  to: svg/   by @ServiceStack  [svg]
61. svg-maps             Material Design Maps Icons                   to: svg/   by @ServiceStack  [svg]
62. svg-navigation       Material Design Navigation Icons             to: svg/   by @ServiceStack  [svg]
63. svg-places           Material Design Places Icons                 to: svg/   by @ServiceStack  [svg]
64. svg-social           Material Design Social Icons                 to: svg/   by @ServiceStack  [svg]
65. svg-toggle           Material Design Toggle Icons                 to: svg/   by @ServiceStack  [svg]

   Usage:  x mix <name> <name> ...

  Search:  x mix [tag] Available tags: auth, config, db, feature, lib, mq, project, react, sharp, svg, ui, vue

Advanced:  x mix ?
`)])],-1),v=n("p",null,[s("Then choosing which features you want to add to your project with "),n("code",null,"x mix <name>"),s(", e.g:")],-1),y=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix redis")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),f=a('',4),b=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix mongodb")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),x=a(`__VP_STATIC_START__<p>Applies the <code>mongodb</code> feature to your HOST project as instructed by the <code>to: $HOST</code> modifier above that it finds by using the first folder containing either <code>appsettings.json</code>, <code>Program.cs</code> or <code>Startup.cs</code> and writing the following <a href="https://gist.github.com/gistlyn/f777396583262127a66e2369ae475d3f" target="_blank" rel="noopener noreferrer">mongodb Gist file</a>:</p><div class="language-csharp"><pre><code><span class="token keyword">namespace</span> <span class="token namespace">MyApp</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureMongoDb</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span></span>
    <span class="token punctuation">{</span>
        <span class="token return-type class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">ConfigureMongoDb</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> mongoClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MongoClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">IMongoDatabase</span> mongoDatabase <span class="token operator">=</span> mongoClient<span class="token punctuation">.</span><span class="token function">GetDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;MyApp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            container<span class="token punctuation">.</span><span class="token function">AddSingleton</span><span class="token punctuation">(</span>mongoDatabase<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>    
<span class="token punctuation">}</span>
</code></pre></div><p>With all <code>MyApp</code> tokens replaced with the <strong>Project Name</strong> using the same replacement rules as new projects, i.e:</p><ul><li><code>MyApp</code> will be replaced with <code>ProjectName</code></li><li><code>my-app</code> will be replaced with <code>project-name</code></li><li><code>My App</code> will be replaced with <code>Project Name</code></li></ul><p>By default it assumes the folder name is the project name, that&#39;s overridable using the <code>-name</code> flag:</p>__VP_STATIC_END__`,5),S=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix -name ProjectName mongodb")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),_=a('',4),A=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix auth auth-mongodb")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),M=n("h3",{id:"mix-in-db-support",tabindex:"-1"},[s("Mix in DB Support "),n("a",{class:"header-anchor",href:"#mix-in-db-support","aria-hidden":"true"},"#")],-1),T=n("p",null,[s("All DB servers are just as easily configurable, which we can quickly find using a "),n("code",null,"[db]"),s(" tag search:")],-1),q=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix [db]")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),C=n("div",{class:"info custom-block"},[n("p",{class:"custom-block-title"},"Tip"),n("p",null,"search term needs to be quoted in unix shells, e.g: '[db]'")],-1),R=n("p",null,[s("Which will list all available "),n("code",null,"[db]"),s(" providers:")],-1),U=n("div",{class:"language-"},[n("pre",null,[n("code",null,`Results matching tag [db]:

   1. redis      Use ServiceStack.Redis            to: $HOST  by @ServiceStack  [db]
   2. sqlserver  Use OrmLite with SQL Server       to: $HOST  by @ServiceStack  [db]
   3. sqlite     Use OrmLite with SQLite           to: $HOST  by @ServiceStack  [db]
   4. postgres   Use OrmLite with PostgreSQL       to: $HOST  by @ServiceStack  [db]
   5. mysql      Use OrmLite with MySql            to: $HOST  by @ServiceStack  [db]
   6. oracle     Use OrmLite with Oracle           to: $HOST  by @ServiceStack  [db]
   7. firebird   Use OrmLite with Firebird         to: $HOST  by @ServiceStack  [db]
   8. dynamodb   Use AWS DynamoDB and PocoDynamo   to: $HOST  by @ServiceStack  [db]
   9. mongodb    Use MongoDB                       to: $HOST  by @ServiceStack  [db]
  10. ravendb    Use RavenDB                       to: $HOST  by @ServiceStack  [db]
  11. marten     Use Marten NoSQL with PostgreSQL  to: $HOST  by @ServiceStack  [db]

   Usage:  x mix <name> <name> ...

  Search:  x mix [tag] Available tags: auth, config, db, feature, lib, mq, project, react, sharp, svg, ui, vue

Advanced:  x mix ?
`)])],-1),I=n("p",null,"So we can install Redis with:",-1),H=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix redis")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),j=a(`__VP_STATIC_START__<p>Where it will apply the <a href="https://gist.github.com/gistlyn/512309b3cb7d734bb0f7323907499b08" target="_blank" rel="noopener noreferrer">Redis Gist</a> below:</p><div class="language-csharp"><pre><code><span class="token keyword">namespace</span> <span class="token namespace">MyApp</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureRedis</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span><span class="token punctuation">,</span> <span class="token class-name">IConfigureAppHost</span></span>
    <span class="token punctuation">{</span>
        <span class="token return-type class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">ConfigureRedis</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRedisClientsManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisManagerPool</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;Redis&quot;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">&quot;localhost:6379&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SharpPagesFeature<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>ScriptMethods<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisScripts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The configuration is declarative where it only runs <code>Configure(IAppHost appHost)</code> in ServiceStack Apps and only adds the <code>RedisScripts</code> if it&#39;s configured with <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a>, otherwise any additional configuration is inert and isn&#39;t run.</p><p>Typically DB&#39;s will require you to specify your App DB&#39;s connection string to your external DB (with a default fallback) - where typically the most effort required to enable a feature is adding a Connection String in your <code>appsettings.json</code>.</p><h3 id="composable-features" tabindex="-1">Composable Features <a class="header-anchor" href="#composable-features" aria-hidden="true">#</a></h3><p>A nice characteristic about &quot;no-touch&quot; layerable features are that they&#39;re composable, where <code>mix</code> will let you hand-pick all features you want in a single command. For example you can enable Authentication, register an RDBMS Auth Repository using SQL Server with:</p>__VP_STATIC_END__`,6),D=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix auth auth-db sqlserver")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),O=n("p",null,[s("Which will apply the "),n("a",{href:"https://gist.github.com/gistlyn/1ec54e10d44f87e0f20daaf7e2248fea",target:"_blank",rel:"noopener noreferrer"},"Configure.Auth.cs"),s(", "),n("a",{href:"https://gist.github.com/gistlyn/16fddde0763b3eee516d670ab9fab194",target:"_blank",rel:"noopener noreferrer"},"Configure.AuthRepository.cs"),s(" and "),n("a",{href:"https://gist.github.com/gistlyn/7075e53e1fe69d3da12996677b5f3a5a",target:"_blank",rel:"noopener noreferrer"},"Configure.Db.cs"),s(" gists.")],-1),B=n("p",null,[s("If you later wanted to switch to PostgreSQL, you can "),n("code",null,"mix"),s(" it in with:")],-1),P=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix postgres")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),L=n("p",null,[s("Where it will override "),n("a",{href:"https://gist.github.com/gistlyn/faf62da8b8ef30849506631025a5d06c",target:"_blank",rel:"noopener noreferrer"},"Configure.Db.cs"),s(" to use the postgres version, leaving any custom logic in "),n("code",null,"Configure.Auth.cs"),s(" or "),n("code",null,"Configure.AuthRepository.cs"),s(" untouched.")],-1),V=n("p",null,"Or if you later want to change the Auth Repository to use Redis instead, you can run:",-1),$=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix auth-redis")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),N=a('',3),E=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix -delete auth auth-db sqlserver")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),Q=a(`__VP_STATIC_START__<p>Which will let you review all the files in each Gist that will deleted, then hit <code>Enter</code> to confirm:</p><div class="language-"><pre><code>Delete 1 file from &#39;auth&#39; https://gist.github.com/gistlyn/1ec54e10d44f87e0f20daaf7e2248fea:

C:\\Projects\\app\\Configure.Auth.cs

Delete 1 file from &#39;auth-db&#39; https://gist.github.com/gistlyn/16fddde0763b3eee516d670ab9fab194:

C:\\Projects\\app\\Configure.AuthRepository.cs

Delete 1 file from &#39;sqlserver&#39; https://gist.github.com/gistlyn/7075e53e1fe69d3da12996677b5f3a5a:

C:\\Projects\\app\\Configure.Db.cs

Proceed? (n/Y):
</code></pre></div><h3 id="encapsulated-features" tabindex="-1">Encapsulated Features <a class="header-anchor" href="#encapsulated-features" aria-hidden="true">#</a></h3><p>A nice benefit of decoupling features into modular classes is that you&#39;re able to a richer and more customizable out-of-the-box experience.</p><p>Instead of overloading users with daunting amounts of configuration required in common medium-sized Apps, most templates will start with an empty slate and leave it for users to read about each feature then decide how to hand-pick different configuration to slot it into their own App&#39;s configuration.</p><p>On the flip-side if you provide too much configuration Developers wont be confident to know what configuration belongs to which feature and which feature are interconnected or can be safely removed without breaking their App.</p><p>With modular features we can encapsulate configuration in a single <code>.cs</code> file that&#39;s primed with the popular well-known configuration for the feature. E.g. The Auth Repositories include an example of maintaining a custom <code>UserAuth</code> model, registering the <a href="/sessions#session-events">Auth Event</a> to populate their additional fields on Authentication and sample code necessary for ensuring a specific Admin User is created on <code>Startup</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">namespace</span> <span class="token namespace">MyApp</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Custom User Table with extended Metadata properties</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppUser</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UserAuth</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ProfileUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastLoginIp <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">DateTime<span class="token punctuation">?</span></span> LastLoginDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppUserAuthEvents</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AuthEvents</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnAuthenticated</span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">IAuthSession</span> session<span class="token punctuation">,</span> <span class="token class-name">IServiceBase</span> authService<span class="token punctuation">,</span> 
            <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> authInfo<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> authRepo <span class="token operator">=</span> HostContext<span class="token punctuation">.</span>AppHost<span class="token punctuation">.</span><span class="token function">GetAuthRepository</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">using</span> <span class="token punctuation">(</span>authRepo <span class="token keyword">as</span> <span class="token class-name">IDisposable</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">var</span></span> userAuth <span class="token operator">=</span> <span class="token punctuation">(</span>AppUser<span class="token punctuation">)</span>authRepo<span class="token punctuation">.</span><span class="token function">GetUserAuth</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>UserAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                userAuth<span class="token punctuation">.</span>ProfileUrl <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">GetProfileUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                userAuth<span class="token punctuation">.</span>LastLoginIp <span class="token operator">=</span> req<span class="token punctuation">.</span>UserHostAddress<span class="token punctuation">;</span>
                userAuth<span class="token punctuation">.</span>LastLoginDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>
                authRepo<span class="token punctuation">.</span><span class="token function">SaveUserAuth</span><span class="token punctuation">(</span>userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureAuthRepository</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureAppHost</span><span class="token punctuation">,</span> <span class="token class-name">IConfigureServices</span><span class="token punctuation">,</span> <span class="token class-name">IPreInitPlugin</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteAuthRepository<span class="token punctuation">&lt;</span>AppUser<span class="token punctuation">,</span> UserAuthDetails<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    UseDistinctRoleTables <span class="token operator">=</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> authRepo <span class="token operator">=</span> appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            authRepo<span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">CreateUser</span><span class="token punctuation">(</span>authRepo<span class="token punctuation">,</span> <span class="token string">&quot;admin@email.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Admin User&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;p@55wOrd&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">roles</span><span class="token punctuation">:</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> RoleNames<span class="token punctuation">.</span>Admin <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">BeforePluginsLoaded</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AssertPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthFeature<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AuthEvents<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AppUserAuthEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Add initial Users to the configured Auth Repository</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token class-name">IAuthRepository</span> authRepo<span class="token punctuation">,</span> 
            <span class="token class-name"><span class="token keyword">string</span></span> email<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> roles<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>authRepo<span class="token punctuation">.</span><span class="token function">GetUserAuthByUserName</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">var</span></span> newAdmin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AppUser</span> <span class="token punctuation">{</span> Email <span class="token operator">=</span> email<span class="token punctuation">,</span> DisplayName <span class="token operator">=</span> name <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">var</span></span> user <span class="token operator">=</span> authRepo<span class="token punctuation">.</span><span class="token function">CreateUserAuth</span><span class="token punctuation">(</span>newAdmin<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
                authRepo<span class="token punctuation">.</span><span class="token function">AssignRoles</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> roles<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>All captured within a working configuration. You can start appreciating the instant utility of <code>mix</code> once you imagine what it was like before with how much time an effort it would&#39;ve taken to scan through docs, learn about each feature independently to be able to piece together equivalent functionality.</p><h3 id="mix-in-auth-repository" tabindex="-1">Mix in Auth Repository <a class="header-anchor" href="#mix-in-auth-repository" aria-hidden="true">#</a></h3><p>As it can take a while to piece together how to configure your preferred Auth Repository, use a Custom User Model and utilize <a href="/sessions#session-events">Auth Events</a> to populate it, we now recommend using <code>mix</code> to configure your preferred Auth Repository, which you can query with:</p>__VP_STATIC_END__`,11),W=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix [auth]")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),G=n("p",null,"To display the current list of available Auth Repositories:",-1),F=n("div",{class:"language-"},[n("pre",null,[n("code",null,`Results matching tag [auth]:

   1. auth              Configure AuthFeature                        to: $HOST  by @ServiceStack [auth]
   2. auth-db           Use OrmLite Auth Repository (requires auth)  to: $HOST  by @ServiceStack [auth]
   3. auth-redis        Use Redis Auth Repository (requires auth)    to: $HOST  by @ServiceStack [auth]
   4. auth-memory       Use Memory Auth Repository (requires auth)   to: $HOST  by @ServiceStack [auth]
   5. auth-dynamodb     Use DynamoDB Auth Repository (requires auth) to: $HOST  by @ServiceStack [auth]
   6. auth-mongodb      Use MongoDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack [auth]
   7. auth-ravendb      Use RavenDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack [auth]
   8. auth-marten       Use Marten Auth Repository (requires auth)   to: $HOST  by @ServiceStack [auth]
   9. feature-authrepo  List and Search Users in an Auth Repo        to: $HOST  by @ServiceStack [feature,auth]
`)])],-1),z=n("h3",{id:"mix-in-mq-server",tabindex:"-1"},[s("Mix in MQ Server "),n("a",{class:"header-anchor",href:"#mix-in-mq-server","aria-hidden":"true"},"#")],-1),J=n("p",null,[s("Likewise we now recommend using "),n("code",null,"mix"),s(" to configure your preferred MQ Service, other than being quicker to add, it proposes adopting a naming convention in app settings and file names that other "),n("code",null,"mix"),s(" features can also make use of:")],-1),Y=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix [mq]")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),X=n("p",null,"Currently available list of MQ Services:",-1),K=n("div",{class:"language-"},[n("pre",null,[n("code",null,`Results matching tag [mq]:

   1. backgroundmq  Use Memory Background MQ                    to: $HOST  by @ServiceStack  [mq]
   2. rabbitmq      Use RabbitMQ                                to: $HOST  by @ServiceStack  [mq]
   3. sqs           Use AWS SQS MQ                              to: $HOST  by @ServiceStack  [mq]
   4. servicebus    Use Azure Service Bus MQ                    to: $HOST  by @ServiceStack  [mq]
   5. redismq       Use Redis MQ                                to: $HOST  by @ServiceStack  [mq]
   6. feature-mq    Simple MQ Feature to test sending Messages  to: $HOST  by @ServiceStack  [feature,mq,sharp]
`)])],-1),Z=n("h2",{id:"mix-in-nuglify",tabindex:"-1"},[s("Mix in NUglify "),n("a",{class:"header-anchor",href:"#mix-in-nuglify","aria-hidden":"true"},"#")],-1),nn=n("p",null,[s("You can configure your ServiceStack App to use Nuglify's Advanced HTML, CSS, JS Minifiers using "),n("a",{href:"/mix-tool"},"mix"),s(" with:")],-1),sn=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix nuglify")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),an=a('',10),en=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x new script Acme")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),tn=n("p",null,[s("Add the "),n("code",null,"example-validation"),s(" mix:")],-1),on=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"cd Acme")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),pn=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix example-validation")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),cn=n("p",null,"Which will prompt you with a link to the gist and the files that will be added to your project:",-1),ln=n("div",{class:"language-"},[n("pre",null,[n("code",null,`Write files from 'example-validation' https://gist.github.com/gistlyn/33873ed2857b2c5a9623629c6210d665 to:

  C:\\projects\\Acme\\Acme\\Configure.Contacts.cs
  C:\\projects\\Acme\\Acme.ServiceInterface\\ContactServices.cs
  C:\\projects\\Acme\\Acme.ServiceModel\\Contacts.cs
  C:\\projects\\Acme\\Acme\\wwwroot\\contacts\\_id\\edit.html
  C:\\projects\\Acme\\Acme\\wwwroot\\contacts\\_requires-auth-partial.html
  C:\\projects\\Acme\\Acme\\wwwroot\\contacts\\index.html

Proceed? (n/Y):
`)])],-1),rn=n("p",null,[s("Now after restarting your App you'll be able to add contacts by clicking on the new "),n("strong",null,"Contacts"),s(" link in your App's main menu:")],-1),un=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"cd Acme")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),dn=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"dotnet run")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),kn=n("p",null,"After you're done reviewing the example you can either refactor it to handle your App's requirements or completely remove it from your App with:",-1),hn=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix -delete example-validation")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),gn=a('',5),mn=n("div",{class:"sh-copy cp flex cursor-pointer mb-3",onclick:"copy(this)"},[n("div",{class:"flex-grow bg-gray-800"},[n("div",{class:"pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"},[n("p",null,"x mix feature-mq")])]),n("div",{class:"flex"},[n("div",{class:"bg-green-600 text-white p-1.5 pb-0"},[n("svg",{class:"copied w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),n("svg",{class:"nocopy w-6 h-6",title:"copy",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})])])])],-1),wn=a(`__VP_STATIC_START__<p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/nav/feature-mq.png" alt=""></p><p>This will add the <code>TestMq</code> Service and make it available to your MQ endpoint. <code>TestMq</code> is a regular service that updates values in the App&#39;s registered <code>ICacheClient</code> and returns the Cache&#39;s current values as well as the internal Stats of the MQ:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IMessageService</span> MqService <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">PublishMq</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">PublishMessage</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TestMq<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">TestMq</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span>
            Cache<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;mq.name&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>Add <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            Cache<span class="token punctuation">.</span><span class="token function">Increment</span><span class="token punctuation">(</span><span class="token string">&quot;mq.counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">uint</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span>Add<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>Add <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            Cache<span class="token punctuation">.</span><span class="token function">Decrement</span><span class="token punctuation">(</span><span class="token string">&quot;mq.counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">uint</span><span class="token punctuation">)</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Add <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TestMqResponse</span> <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> Cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;mq.name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Counter <span class="token operator">=</span> Cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;mq.counter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            StatsDescription <span class="token operator">=</span> MqService<span class="token punctuation">.</span><span class="token function">GetStatsDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The 2 ways to call a MQ Service is directly using the <code>publish</code> or <code>sendOneWay</code> APIs (available in all ServiceStack Service Clients) where it send the request to the Service&#39;s <code>/oneway</code> endpoint which will automatically publish it to the registered MQ.</p><p>Alternatively you can publish the Request DTO yourself from a different Service Implementation as done in <code>PublishMq</code>, as-is typical for Services that queues sending emails without blocking Service Execution.</p><p>The feature&#39;s UI allows you to publish <code>TestMq</code> messages using either approach:</p><div class="language-js"><pre><code>client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> oneway <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;input[name=mq-publish]:checked&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">&quot;OneWay&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>oneway<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TestMq</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> $txtName<span class="token punctuation">.</span>value<span class="token punctuation">,</span> add<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PublishMq</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> $txtName<span class="token punctuation">.</span>value<span class="token punctuation">,</span> add<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Both approaches end with the same result with the <code>TestMq</code> Request DTO published and executed by the registered MQ Service as shown in the UI which is periodically updated with the current state in the Cache and the internal stats of the MQ Service showing how many messages it processed.</p><h3 id="feature-authrepo" tabindex="-1">feature-authrepo <a class="header-anchor" href="#feature-authrepo" aria-hidden="true">#</a></h3><p>Another UI feature <code>mix</code> available is a UI to browse and search for registered users in an Auth Repository.</p><p>This wasn&#39;t generically possible before as <code>IAuthRepository</code> didn&#39;t previously provide any API&#39;s to be able to query all Users, which is now available in the new <code>IQueryUserAuth</code> API:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IQueryUserAuth</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">GetUserAuths</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> orderBy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> skip <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> take <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">SearchUserAuths</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> query<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> orderBy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> skip <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> take <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is now implemented in all ServiceStack Auth Repositories although there are limitations depending on the queryability of the underlying data provider.</p><p>Searching in these Auth Repositories are efficient and searches in <strong>UserName</strong>, <strong>Email</strong>, <strong>DisplayName</strong> and <strong>Company</strong> fields:</p><ul><li><code>OrmLiteAuthRepository</code></li><li><code>InMemoryAuthRepository</code></li><li><code>MongoDbAuthRepository</code></li></ul><p>For RavenDB it reuses the existing Username/Email indexes so only searches <strong>UserName</strong>, <strong>Email</strong> fields and only performs a StartsWith/EndsWith search as allowed by RavenDB:</p><ul><li><code>RavenDbUserAuthRepository</code></li></ul><p>Searches and Order By&#39;s are very inefficient in Redis as it needs to deserialize all users to perform the querying/sorting on the client. Just paging through users with skip/take is efficient as it only needs to deserialize the partial resultset.</p><ul><li><code>RedisAuthRepository</code></li></ul><p>All queries performs a table scan in DynamoDB but searches all fields:</p><ul><li><code>DynamoDbAuthRepository</code></li></ul><h4 id="api-usage" tabindex="-1">API Usage <a class="header-anchor" href="#api-usage" aria-hidden="true">#</a></h4><p>These API&#39;s are accessible from an <code>IAuthRepository</code> dependency, if you&#39;re using a custom Auth Repository it will need to implement <code>IQueryUserAuth</code> otherwise calling these APIs (and feature) will throw a <code>NotSupportedException</code>:</p><div class="language-csharp"><pre><code>AuthRepository<span class="token punctuation">.</span>GetUserAuths<span class="token return-type class-name"><span class="token punctuation">(</span>orderBy<span class="token punctuation">:</span>fieldName<span class="token punctuation">,</span> skip<span class="token punctuation">:</span>skip<span class="token punctuation">,</span> take<span class="token punctuation">:</span>take<span class="token punctuation">)</span></span>
AuthRepository<span class="token punctuation">.</span><span class="token function">SearchUserAuths</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">query</span><span class="token punctuation">:</span>q<span class="token punctuation">,</span> <span class="token named-parameter punctuation">orderBy</span><span class="token punctuation">:</span>fieldName<span class="token punctuation">,</span> <span class="token named-parameter punctuation">skip</span><span class="token punctuation">:</span>skip<span class="token punctuation">,</span> <span class="token named-parameter punctuation">take</span><span class="token punctuation">:</span>take<span class="token punctuation">)</span>
</code></pre></div><p>The <code>orderBy</code> is the field name you want to order the results by, e.g. <code>UserName</code> and can suffixed with the <code>DESC</code> modifier to order results in descending order, e.g. <code>UserName DESC</code>.</p><p>In <code>#Script</code> these API&#39;s are available in <code>camelCase</code> off <code>authRepo</code> using a JS Object literal as seen in <code>users.html</code> page usage of this feature:</p>__VP_STATIC_END__`,26),vn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"authRepo"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"searchUserAuths"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"query"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"qs"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"q"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"take"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"pageSize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"skip"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"pageSize"),n("span",{class:"token punctuation"},"*"),n("span",{class:"token variable"},"page"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"users"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),yn=n("h4",{id:"users-ui",tabindex:"-1"},[s("Users UI "),n("a",{class:"header-anchor",href:"#users-ui","aria-hidden":"true"},"#")],-1),fn=n("p",null,[s("Clicking the "),n("strong",null,"Users"),s(" menu item will show you a list of searchable and pageable registered Users in a summary view:")],-1),bn=n("p",null,[n("img",{src:"https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/feature-authrepo.png",alt:""})],-1),xn=n("p",null,[s("Clicking on a user will show you a complete list of fields stored for that user, including any custom fields, if you're using a Custom "),n("code",null,"UserAuth"),s(" table:")],-1),Sn=n("p",null,[n("img",{src:"https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/feature-authrepo-admin.png",alt:""})],-1),_n=[c,i,l,r,u,d,k,h,g,m,w,v,y,f,b,x,S,_,A,M,T,q,C,R,U,I,H,j,D,O,B,P,L,V,$,N,E,Q,W,G,F,z,J,Y,X,K,Z,nn,sn,an,en,tn,on,pn,cn,ln,rn,un,dn,kn,hn,gn,mn,wn,vn,yn,fn,bn,xn,Sn];function An(Mn,Tn,qn,Cn,Rn,Un){return o(),t("div",null,_n)}var jn=e(p,[["render",An]]);export{Hn as __pageData,jn as default};
