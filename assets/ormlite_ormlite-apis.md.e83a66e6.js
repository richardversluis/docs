import{_ as n,c as s,o as a,a as t}from"./app.64b20f26.js";const g='{"title":"OrmLite API Overview","description":"","frontmatter":{"title":"OrmLite API Overview"},"headers":[{"level":2,"title":"Create Tables Schemas","slug":"create-tables-schemas"},{"level":2,"title":"Query Examples","slug":"query-examples"}],"relativePath":"ormlite/ormlite-apis.md","lastUpdated":1645007721717}',p={},e=t(`<p>OrmLite&#39;s APIs are minimal, providing basic shortcuts for the primitive SQL statements:</p><p><a href="https://raw.githubusercontent.com/ServiceStack/Assets/master/img/ormlite/OrmLiteApi.png" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/img/ormlite/OrmLiteApi.png" alt="OrmLite API"></a></p><p>OrmLite makes available most of its functionality via extension methods to add enhancements over <a href="http://ADO.NET" target="_blank" rel="noopener noreferrer">ADO.NET</a>&#39;s <code>IDbConnection</code>, providing a Typed RDBMS-agnostic API that transparently handles differences in each supported RDBMS provider.</p><h2 id="create-tables-schemas" tabindex="-1">Create Tables Schemas <a class="header-anchor" href="#create-tables-schemas" aria-hidden="true">#</a></h2><p>OrmLite is able to <strong>CREATE</strong>, <strong>DROP</strong> and <strong>ALTER</strong> RDBMS Tables from your code-first Data Models with rich annotations for controlling how the underlying RDBMS Tables are constructed.</p><p>The Example below utilizes several annotations to customize the definition and behavior of RDBMS tables based on a POCOs <strong>public properties</strong>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Player</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>                     <span class="token comment">// &#39;Id&#39; is PrimaryKey by convention</span>

    <span class="token punctuation">[</span>Required<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>           <span class="token comment">// Creates NOT NULL Column</span>

    <span class="token punctuation">[</span><span class="token function">Alias</span><span class="token punctuation">(</span><span class="token string">&quot;Surname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>                              <span class="token comment">// Maps to [Surname] RDBMS column</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Index</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Unique <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>                          <span class="token comment">// Creates Unique Index</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>Phone<span class="token punctuation">&gt;</span></span> PhoneNumbers <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>   <span class="token comment">// Complex Types blobbed by default</span>

    <span class="token punctuation">[</span>Reference<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>GameItem<span class="token punctuation">&gt;</span></span> GameItems <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>   <span class="token comment">// 1:M Reference Type saved separately</span>

    <span class="token punctuation">[</span>Reference<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Profile</span> Profile <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token comment">// 1:1 Reference Type saved separately</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> ProfileId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>              <span class="token comment">// 1:1 Self Ref Id on Parent Table</span>

    <span class="token punctuation">[</span><span class="token function">ForeignKey</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Level</span><span class="token punctuation">)</span><span class="token punctuation">,</span> OnDelete<span class="token operator">=</span><span class="token string">&quot;CASCADE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// Creates ON DELETE CASCADE Constraint</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Guid</span> SavedLevelId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>          <span class="token comment">// Creates Foreign Key Reference</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">ulong</span></span> RowVersion <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>           <span class="token comment">// Optimistic Concurrency Updates</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span>                                  <span class="token comment">// Blobbed Type only</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">PhoneKind</span> Kind <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Number <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Ext <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">PhoneKind</span>
<span class="token punctuation">{</span>
    Home<span class="token punctuation">,</span>
    Mobile<span class="token punctuation">,</span>
    Work<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Alias</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;PlayerProfile&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>                            <span class="token comment">// Maps to [PlayerProfile] RDBMS Table</span>
<span class="token punctuation">[</span><span class="token function">CompositeIndex</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Username<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>Region<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment">// Creates Composite Index</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Profile</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoIncrement</span></span><span class="token punctuation">]</span>                                 <span class="token comment">// Auto Insert Id assigned by RDBMS</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">PlayerRole</span> Role <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token comment">// Native support for Enums</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Region</span> Region <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Username <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">long</span></span> HighScore <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Default</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>                                    <span class="token comment">// Created in RDBMS with DEFAULT (1)</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">long</span></span> GamesPlayed <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CheckConstraint</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Energy BETWEEN 0 AND 100&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>   <span class="token comment">// Creates RDBMS Check Constraint</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">short</span></span> Energy <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ProfileUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Meta <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">PlayerRole</span>                              <span class="token comment">// Enums saved as strings by default</span>
<span class="token punctuation">{</span>
    Leader<span class="token punctuation">,</span>
    Player<span class="token punctuation">,</span>
    NonPlayer<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EnumAsInt</span></span><span class="token punctuation">]</span>                                         <span class="token comment">// Enum Saved as int</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Region</span>
<span class="token punctuation">{</span>
    Africa <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    Americas <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    Asia <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    Australasia <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    Europe <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameItem</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PrimaryKey</span></span><span class="token punctuation">]</span>                                    <span class="token comment">// Specify field to use as Primary Key</span>
    <span class="token punctuation">[</span><span class="token function">StringLength</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">]</span>                              <span class="token comment">// Creates VARCHAR COLUMN</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> PlayerId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>               <span class="token comment">// Foreign Table Reference Id</span>

    <span class="token punctuation">[</span><span class="token function">StringLength</span><span class="token punctuation">(</span>StringLengthAttribute<span class="token punctuation">.</span>MaxText<span class="token punctuation">)</span><span class="token punctuation">]</span>   <span class="token comment">// Creates &quot;TEXT&quot; RDBMS Column </span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Description <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Default</span><span class="token attribute-arguments"><span class="token punctuation">(</span>OrmLiteVariables<span class="token punctuation">.</span>SystemUtc<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>           <span class="token comment">// Populated with UTC Date by RDBMS</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> DateAdded <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Level</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Guid</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>                    <span class="token comment">// Unique Identifer/GUID Primary Key</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Data <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>                <span class="token comment">// Saved as BLOB/Binary where possible</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can drop the existing tables and re-create the above table definitions with:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> dbFactory<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TableExists</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Level<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeleteAll</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Level<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">// Delete ForeignKey data if exists</span>

    <span class="token comment">//DROP and CREATE ForeignKey Tables in dependent order</span>
    db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DropTable</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Player<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DropTable</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Level<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">CreateTable</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Level<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">CreateTable</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Player<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//DROP and CREATE tables without Foreign Keys in any order</span>
    db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DropAndCreateTable</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Profile<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DropAndCreateTable</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GameItem<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> savedLevel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Level</span>
    <span class="token punctuation">{</span>
        Id <span class="token operator">=</span> Guid<span class="token punctuation">.</span><span class="token function">NewGuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        Data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    db<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>savedLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> player <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Player</span>
    <span class="token punctuation">{</span>
        Id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        FirstName <span class="token operator">=</span> <span class="token string">&quot;North&quot;</span><span class="token punctuation">,</span>
        LastName <span class="token operator">=</span> <span class="token string">&quot;West&quot;</span><span class="token punctuation">,</span>
        Email <span class="token operator">=</span> <span class="token string">&quot;north@west.com&quot;</span><span class="token punctuation">,</span>
        PhoneNumbers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Phone<span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Phone</span> <span class="token punctuation">{</span> Kind <span class="token operator">=</span> PhoneKind<span class="token punctuation">.</span>Mobile<span class="token punctuation">,</span> Number <span class="token operator">=</span> <span class="token string">&quot;123-555-5555&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Phone</span> <span class="token punctuation">{</span> Kind <span class="token operator">=</span> PhoneKind<span class="token punctuation">.</span>Home<span class="token punctuation">,</span>   Number <span class="token operator">=</span> <span class="token string">&quot;555-555-5555&quot;</span><span class="token punctuation">,</span> Ext <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        GameItems <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>GameItem<span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameItem</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;WAND&quot;</span><span class="token punctuation">,</span> Description <span class="token operator">=</span> <span class="token string">&quot;Golden Wand of Odyssey&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameItem</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;STAFF&quot;</span><span class="token punctuation">,</span> Description <span class="token operator">=</span> <span class="token string">&quot;Staff of the Magi&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        Profile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Profile</span>
        <span class="token punctuation">{</span>
            Username <span class="token operator">=</span> <span class="token string">&quot;north&quot;</span><span class="token punctuation">,</span>
            Role <span class="token operator">=</span> PlayerRole<span class="token punctuation">.</span>Leader<span class="token punctuation">,</span>
            Region <span class="token operator">=</span> Region<span class="token punctuation">.</span>Australasia<span class="token punctuation">,</span>
            HighScore <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
            GamesPlayed <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
            ProfileUrl <span class="token operator">=</span> <span class="token string">&quot;https://www.gravatar.com/avatar/205e460b479e2e5b48aec07710c08d50.jpg&quot;</span><span class="token punctuation">,</span>
            Meta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">{</span>
                <span class="token punctuation">{</span><span class="token string">&quot;Quote&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;I am gamer&quot;</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        SavedLevelId <span class="token operator">=</span> savedLevel<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    db<span class="token punctuation">.</span><span class="token function">Save</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> <span class="token named-parameter punctuation">references</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This will add a record in all the above tables with all the Reference data properties automatically populated which we can quickly see by selecting the inserted <code>Player</code> record and all its referenced data by using <a href="./reference-support.html#querying-pocos-with-references">OrmLite&#39;s Load APIs</a>, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> dbPlayer <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadSingleById</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Player<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>player<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>

dbPlayer<span class="token punctuation">.</span><span class="token function">PrintDump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which uses the <a href="http://docs.servicestack.net/dump-utils" target="_blank" rel="noopener noreferrer">Dump Utils</a> to quickly display the populated data to the console:</p><div class="language-"><pre><code>{
    Id: 1,
    FirstName: North,
    LastName: West,
    Email: north@west.com,
    PhoneNumbers: 
    [
        {
            Kind: Mobile,
            Number: 123-555-5555
        },
        {
            Kind: Home,
            Number: 555-555-5555,
            Ext: 123
        }
    ],
    GameItems: 
    [
        {
            Name: WAND,
            PlayerId: 1,
            Description: Golden Wand of Odyssey,
            DateAdded: 2018-01-17T07:53:45-05:00
        },
        {
            Name: STAFF,
            PlayerId: 1,
            Description: Staff of the Magi,
            DateAdded: 2018-01-17T07:53:45-05:00
        }
    ],
    Profile: 
    {
        Id: 1,
        Role: Leader,
        Region: Australasia,
        Username: north,
        HighScore: 100,
        GamesPlayed: 10,
        Energy: 0,
        ProfileUrl: &quot;https://www.gravatar.com/avatar/205e460b479e2e5b48aec07710c08d50.jpg&quot;,
        Meta: 
        {
            Quote: I am gamer
        }
    },
    ProfileId: 1,
    SavedLevelId: 7690dfa4d31949ab9bce628c34d1c549,
    RowVersion: 2
}
</code></pre></div><p>Feel free to continue experimenting with <a href="https://gistlyn.com/?gist=840bc7f09292ad5753d07cef6063893e&amp;collection=991db51e44674ad01d3d318b24cf0934" target="_blank" rel="noopener noreferrer">this Example Live on Gistlyn</a>.</p><h2 id="query-examples" tabindex="-1">Query Examples <a class="header-anchor" href="#query-examples" aria-hidden="true">#</a></h2><p>If your SQL doesn&#39;t start with a <strong>SELECT</strong> statement, it is assumed a <code>WHERE</code> clause is being provided, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> tracks <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;Artist = @artist AND Album = @album&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token punctuation">{</span> artist <span class="token operator">=</span> <span class="token string">&quot;Nirvana&quot;</span><span class="token punctuation">,</span> album <span class="token operator">=</span> <span class="token string">&quot;Heart Shaped Box&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which is equivalent to:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> tracks <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM track WHERE Artist = @artist AND Album = @album&quot;</span><span class="token punctuation">,</span> 
    <span class="token keyword">new</span> <span class="token punctuation">{</span> artist <span class="token operator">=</span> <span class="token string">&quot;Nirvana&quot;</span><span class="token punctuation">,</span> album <span class="token operator">=</span> <span class="token string">&quot;Heart Shaped Box&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Use <code>Sql*</code> APIs for when you want to query custom SQL that is not a SELECT statement, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> tracks <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SqlList</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;EXEC GetArtistTracks @artist, @album&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token punctuation">{</span> artist <span class="token operator">=</span> <span class="token string">&quot;Nirvana&quot;</span><span class="token punctuation">,</span> album <span class="token operator">=</span> <span class="token string">&quot;Heart Shaped Box&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Select</strong> returns multiple records:</p><div class="language-csharp"><pre><code><span class="token class-name">List<span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span> tracks <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Single</strong> returns a single record:</p><div class="language-csharp"><pre><code><span class="token class-name">Track</span> track <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Single</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>RefId <span class="token operator">==</span> refId<span class="token punctuation">)</span>
</code></pre></div><p><strong>Dictionary</strong> returns a Dictionary made from the first two columns:</p><div class="language-csharp"><pre><code><span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> trackIdNamesMap <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Dictionary</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
    db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> x<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> x<span class="token punctuation">.</span>Name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> trackIdNamesMap <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Dictionary</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
    <span class="token string">&quot;select Id, Name from Track&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Lookup</strong> returns an <code>Dictionary&lt;K, List&lt;V&gt;&gt;</code> made from the first two columns:</p><div class="language-csharp"><pre><code><span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> albumTrackNames <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Lookup</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
    db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> x<span class="token punctuation">.</span>AlbumId<span class="token punctuation">,</span> x<span class="token punctuation">.</span>Name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> albumTrackNames <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Lookup</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
    <span class="token string">&quot;select AlbumId, Name from Track&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Column</strong> returns a List of first column values:</p><div class="language-csharp"><pre><code><span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> trackNames <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Column</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> trackNames <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Column</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;select Name from Track&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>HashSet</strong> returns a HashSet of distinct first column values:</p><div class="language-csharp"><pre><code><span class="token class-name">HashSet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> uniqueTrackNames <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ColumnDistinct</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
    db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token class-name">HashSet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> uniqueTrackNames <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ColumnDistinct</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;select Name from Track&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Scalar</strong> returns a single scalar value:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> trackCount <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Scalar</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>Sql<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token class-name"><span class="token keyword">var</span></span> trackCount <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Scalar</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;select count(*) from Track&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>Anonymous types passed into <strong>Where</strong> are treated like an <strong>AND</strong> filter:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> track3 <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Where</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> AlbumName <span class="token operator">=</span> <span class="token string">&quot;Throwing Copper&quot;</span><span class="token punctuation">,</span> TrackNo <span class="token operator">=</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>SingleById(s), SelectById(s), etc provide strong-typed convenience methods to fetch by a Table&#39;s <strong>Id</strong> primary key field.</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> track <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SingleById</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> tracks <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SelectByIds</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Track<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>`,39),o=[e];function c(l,u,k,i,r,d){return a(),s("div",null,o)}var y=n(p,[["render",c]]);export{g as __pageData,y as default};
