import{_ as e,c as n,o as a,a as s}from"./app.64b20f26.js";const g='{"title":"JavaScript Add ServiceStack Reference","description":"","frontmatter":{"slug":"javascript-add-servicestack-reference","title":"JavaScript Add ServiceStack Reference"},"headers":[{"level":3,"title":"Enhanced Dev Time productivity with TypeScript","slug":"enhanced-dev-time-productivity-with-typescript"},{"level":3,"title":"Change Default Server Configuration","slug":"change-default-server-configuration"},{"level":2,"title":"DTO Customization Options","slug":"dto-customization-options"},{"level":3,"title":"Change Default Server Configuration","slug":"change-default-server-configuration-1"},{"level":3,"title":"IncludeTypes","slug":"includetypes"},{"level":3,"title":"ExcludeTypes","slug":"excludetypes"},{"level":3,"title":"Cache","slug":"cache"}],"relativePath":"javascript-add-servicestack-reference.md","lastUpdated":1645007721709}',t={},p=s(`<p>In addition to <a href="/typescript-add-servicestack-reference">TypeScript</a> support for generating typed Data Transfer Objects (DTOs), JavaScript is now supported.</p><p>Unlike TypeScript, JavaScript generated DTOs can be used directly from the browser, removing the need to keep your DTOs in sync with extra tooling by including a direct reference in your HTML Page:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/types/js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>To make typed API Requests from web pages, you need only include:</p><ul><li><strong>/js/require.js</strong> - containing a simple <code>require()</code> to load <strong>CommonJS</strong> libraries</li><li><strong>/js/servicestack-client.js</strong> - production build of <a href="https://github.com/ServiceStack/servicestack-client" target="_blank" rel="noopener noreferrer">@servicestack/client</a></li><li><strong>/types/js</strong> - containing your APIs typed JS DTOs - all built-in ServiceStack</li></ul><p>After which you&#39;ll have access to the generic <code>JsonServiceClient</code> with your APIs Typed Request DTOs, e.g:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/require.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/servicestack-client.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/types/js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">var</span> <span class="token punctuation">{</span> JsonServiceClient<span class="token punctuation">,</span> Hello <span class="token punctuation">}</span> <span class="token operator">=</span> exports

<span class="token keyword">var</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
client<span class="token punctuation">.</span><span class="token function">api</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">api</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
</code></pre></div><p>Using <strong>/types/js</strong> has the same behavior as using <code>dtos.js</code> generated from <code>$ tsc dtos.ts</code> whose outputs are identical, i.e. both containing your API DTOs generated in CommonJS format. It&#39;s feasible to simulate the TypeScript compiler&#39;s output in this instance as ServiceStack only needs to generate DTO Types and Enums to enable its end-to-end API, and not any other of TypeScript&#39;s vast feature set.</p><h3 id="enhanced-dev-time-productivity-with-typescript" tabindex="-1">Enhanced Dev Time productivity with TypeScript <a class="header-anchor" href="#enhanced-dev-time-productivity-with-typescript" aria-hidden="true">#</a></h3><p>Even when no longer using TypeScript DTOs in your Apps, it&#39;s still useful to have TypeScript&#39;s <code>dtos.ts</code> included in your project (inc. Vanilla JS projects) to serve as optional type annotations enabling rich intelli-sense and static analysis in IDEs that support it, but as it&#39;s no longer used at runtime you&#39;re free to generate it at optimal times that don&#39;t interrupt your dev workflow.</p><h3 id="change-default-server-configuration" tabindex="-1">Change Default Server Configuration <a class="header-anchor" href="#change-default-server-configuration" aria-hidden="true">#</a></h3><p>The above defaults are also overridable on the ServiceStack Server by modifying the default config on the <code>NativeTypesFeature</code> Plugin, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> nativeTypes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NativeTypesFeature<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
nativeTypes<span class="token punctuation">.</span>MetadataTypesConfig<span class="token punctuation">.</span>MakeVirtual <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div><h2 id="dto-customization-options" tabindex="-1">DTO Customization Options <a class="header-anchor" href="#dto-customization-options" aria-hidden="true">#</a></h2><p>In most cases you&#39;ll just use the generated JavaScript DTO&#39;s as-is, however you can further customize how the DTOs are generated by overriding the default options.</p><p>The header in the generated DTOs show the different options JavaScript types support with their defaults. Default values are shown with the comment prefix of <code>//</code>. To override a value, remove the <code>//</code> and specify the value to the right of the <code>:</code>. Any uncommented value will be sent to the server to override any server defaults.</p><p>The DTO comments allows for customizations for how DTOs are generated. The default options that were used to generate the DTOs are repeated in the header comments of the generated DTOs, options that are preceded by a TypeScript comment <code>//</code> are defaults from the server, any uncommented value will be sent to the server to override any server defaults.</p><div class="language-js"><pre><code><span class="token comment">/* Options:
Date: 2022-01-28 02:10:26
Version: 6.00
Tip: To override a DTO option, remove &quot;//&quot; prefix before updating
BaseUrl: https://blazor-wasm-api.jamstacks.net

//AddServiceStackTypes: True
//AddDescriptionAsComments: True
//IncludeTypes: 
//ExcludeTypes: 
//DefaultImports: 
*/</span>
</code></pre></div><p>We&#39;ll go through and cover each of the above options to see how they affect the generated DTO&#39;s:</p><h3 id="change-default-server-configuration-1" tabindex="-1">Change Default Server Configuration <a class="header-anchor" href="#change-default-server-configuration-1" aria-hidden="true">#</a></h3><p>The above defaults are also overridable on the ServiceStack Server by modifying the default config on the <code>NativeTypesFeature</code> Plugin, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">//Server example in CSharp</span>
<span class="token class-name"><span class="token keyword">var</span></span> nativeTypes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NativeTypesFeature<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
nativeTypes<span class="token punctuation">.</span>MetadataTypesConfig<span class="token punctuation">.</span>IgnoreTypesInNamespaces <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div><p>We&#39;ll go through and cover each of the above options to see how they affect the generated DTO&#39;s:</p><h3 id="includetypes" tabindex="-1">IncludeTypes <a class="header-anchor" href="#includetypes" aria-hidden="true">#</a></h3><p>Is used as a Whitelist to specify only the types you would like to have code-generated:</p><div class="language-"><pre><code>/* Options:
IncludeTypes: Hello, HelloResponse
</code></pre></div><p>Will only generate <code>Hello</code> and <code>HelloResponse</code> DTOs:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> HelloResponse <span class="token operator">=</span> <span class="token comment">/** @class */</span> <span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>HelloResponse <span class="token operator">=</span> HelloResponse<span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> Hello <span class="token operator">=</span> <span class="token comment">/** @class */</span> <span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>Hello <span class="token operator">=</span> Hello<span class="token punctuation">;</span>
</code></pre></div><h4 id="include-generic-types" tabindex="-1">Include Generic Types <a class="header-anchor" href="#include-generic-types" aria-hidden="true">#</a></h4><p>Use .NET&#39;s Type Name to include Generic Types, i.e. the Type name separated by the backtick followed by the number of generic arguments, e.g:</p><div class="language-"><pre><code>IncludeTypes: IReturn\`1,MyPair\`2
</code></pre></div><h4 id="include-request-dto-and-its-dependent-types" tabindex="-1">Include Request DTO and its dependent types <a class="header-anchor" href="#include-request-dto-and-its-dependent-types" aria-hidden="true">#</a></h4><p>You can include a Request DTO and all its dependent types with a <code>.*</code> suffix on the Request DTO, e.g:</p><div class="language-"><pre><code>/* Options:
IncludeTypes: GetTechnology.*
</code></pre></div><p>Which will include the <code>GetTechnology</code> Request DTO, the <code>GetTechnologyResponse</code> Response DTO and all Types that they both reference.</p><h4 id="include-all-types-within-a-c-namespace" tabindex="-1">Include All Types within a C# namespace <a class="header-anchor" href="#include-all-types-within-a-c-namespace" aria-hidden="true">#</a></h4><p>If your DTOs are grouped into different namespaces they can be all included using the <code>/*</code> suffix, e.g:</p><div class="language-"><pre><code>/* Options:
IncludeTypes: MyApp.ServiceModel.Admin/*
</code></pre></div><p>This will include all DTOs within the <code>MyApp.ServiceModel.Admin</code> C# namespace.</p><h4 id="include-all-services-in-a-tag-group" tabindex="-1">Include All Services in a Tag Group <a class="header-anchor" href="#include-all-services-in-a-tag-group" aria-hidden="true">#</a></h4><p>Services <a href="/api-design#group-services-by-tag">grouped by Tag</a> can be used in the <code>IncludeTypes</code> where tags can be specified using braces in the format <code>{tag}</code> or <code>{tag1,tag2,tag3}</code>, e.g:</p><div class="language-"><pre><code>/* Options:
IncludeTypes: {web,mobile}
</code></pre></div><p>Or individually:</p><div class="language-"><pre><code>/* Options:
IncludeTypes: {web},{mobile}
</code></pre></div><h3 id="excludetypes" tabindex="-1">ExcludeTypes <a class="header-anchor" href="#excludetypes" aria-hidden="true">#</a></h3><p>Is used as a Blacklist to specify which types you would like excluded from being generated:</p><div class="language-"><pre><code>/* Options:
ExcludeTypes: GetTechnology,GetTechnologyResponse
</code></pre></div><p>Will exclude <code>GetTechnology</code> and <code>GetTechnologyResponse</code> DTOs from being generated.</p><h3 id="cache" tabindex="-1">Cache <a class="header-anchor" href="#cache" aria-hidden="true">#</a></h3><p>When using <code>/types/js</code> directly from a <code>script</code> tag, the server will cache the result by default when not running in <code>HostContext.DebugMode</code>.</p><p>This caching process can be disabled if required by using <code>?cache=false</code>.</p>`,51),o=[p];function c(i,l,r,u,d,h){return a(),n("div",null,o)}var v=e(t,[["render",c]]);export{g as __pageData,v as default};
